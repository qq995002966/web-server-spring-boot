var F_Face_Html={_formatCompareData:function(e,a){var t={xAxis:[],data:[],data2:[]},i=[],o=[];a.left.length<a.right.length?(i=a.right,o=a.left):(i=a.left,o=a.right);for(var c=0;c<i.length;c++)$.each(i[c],function(a,i){t.xAxis.push(a),"chart_post_hour_compare"==e?t.data.push((100*i).toFixed(2)):t.data.push(i),t.data2.push(0)});for(var c=0;c<o.length;c++)$.each(o[c],function(a,i){var o=$.inArray(a,t.xAxis);o>-1&&(t.data2[o]="chart_post_hour_compare"==e?(100*i).toFixed(2):i)});return t},_chartBar:function(e,a,t){var i={xAxis:[],data:[],data2:[]},o={};switch(o.tooltip={trigger:"item"},o.legend={},o.grid={left:"10",right:"40",bottom:0,top:"3%",containLabel:!0},o.xAxis=[{splitLine:{show:!1},type:"category",data:i.xAxis,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#333333",fontSize:"11px"}}}],o.yAxis=[{splitLine:{lineStyle:{color:"#EEEEEE"}},type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#333333",fontSize:"11px"}}}],a){case"chart_tieba_age":case"chart_fans_num":for(var c=0,l=0;l<t.length;l++)for(var s in t[l])c+=parseInt(t[l][s]);for(var l=0;l<t.length;l++)$.each(t[l],function(e,a){i.xAxis.push(e),_=c>0?(parseInt(a)/c*100).toFixed(2):0,i.data.push(_)});o.tooltip={trigger:"item",formatter:function(e){return e.name+"<br>"+e.value+"%"}},o.yAxis=[{splitLine:{lineStyle:{color:"#EEEEEE"}},type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter:"{value}% ",textStyle:{color:"#333333",fontSize:"11px"}}}];break;case"chart_tieba_age_compare":case"chart_fans_num_compare":case"game_compare_chart_tieba_age_compare":case"game_compare_chart_fans_num_compare":o.color=["#72C4FF","#AEDD8C"],o.legend={left:"right",data:[{name:e[0],icon:"circle"},{name:e[1],icon:"circle"}]},o.grid={left:"10",right:"40",bottom:0,top:"10%",containLabel:!0};for(var n=0,r=0,l=0;l<t.left.length;l++)for(var s in t.left[l])n+=parseInt(t.left[l][s]);for(var l=0;l<t.right.length;l++)for(var s in t.right[l])r+=parseInt(t.right[l][s]);for(var _=0,l=0;l<t.left.length;l++){_=0;for(var s in t.left[l])_=(parseInt(t.left[l][s])/n*100).toFixed(2),t.left[l][s]=_}for(var l=0;l<t.right.length;l++){_=0;for(var s in t.right[l])_=(parseInt(t.right[l][s])/r*100).toFixed(2),t.right[l][s]=_}i=F_Face_Html._formatCompareData(a,t),o.tooltip={trigger:"item",formatter:function(e){return e.name+"<br>"+e.value+"%"}},o.xAxis=[{splitLine:{show:!1},type:"category",data:i.xAxis,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#333333",fontSize:"11px"},interval:"0"}}],o.yAxis=[{splitLine:{lineStyle:{color:"#EEEEEE"}},type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter:"{value}% ",textStyle:{color:"#333333",fontSize:"11px"}}}]}i.data2.length>0?o.series=[{barMaxWidth:30,type:"bar",name:e[0],data:i.data},{barMaxWidth:30,type:"bar",name:e[1],data:i.data2}]:o.series=[{barMaxWidth:30,type:"bar",name:"数量",data:i.data}],B_Chart._getEChart("line",a,o)},_chartLine:function(e,a,t){var i={xAxis:[],data:[],data2:[]},o={};switch(o.tooltip={trigger:"axis"},o.grid={left:"10",right:"40",bottom:0,top:"3%",containLabel:!0},a){case"chart_hot_value":case"chart_title_num":case"chart_content_num":case"chart_be_replied":for(var c=0;c<t.length;c++)$.each(t[c],function(e,a){i.xAxis.push(e),i.data.push(a)});break;case"chart_post_hour":for(var c=0;c<t.length;c++)$.each(t[c],function(e,a){i.xAxis.push(e),i.data.push((100*a).toFixed(2))});break;case"chart_title_num_compare":case"chart_content_num_compare":case"chart_be_replied_compare":case"chart_post_hour_compare":case"game_compare_chart_title_num_compare":case"game_compare_chart_content_num_compare":case"game_compare_chart_be_replied_compare":case"game_compare_chart_post_hour_compare":o.color=["#72C4FF","#AEDD8C"],o.legend={left:"right",data:[{name:e[0],icon:"circle"},{name:e[1],icon:"circle"}]},o.grid={left:"10",right:"40",bottom:0,top:"10%",containLabel:!0},i=F_Face_Html._formatCompareData(a,t)}switch(o.xAxis=[{splitLine:{show:!1},type:"category",boundaryGap:!1,data:i.xAxis,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#333333",fontSize:"11px"},formatter:function(e,a){return B_Date._dateChart(e)}}}],o.yAxis=[{splitLine:{lineStyle:{color:"#EEEEEE"}},type:"value",nameLocation:"middle",nameTextStyle:{color:"#C2C2C2",fontSize:"11px"},nameGap:25,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#333333",fontSize:"11px"}}}],a){case"chart_post_hour":case"chart_post_hour_compare":case"game_compare_chart_post_hour_compare":o.xAxis[0].axisLabel.formatter=null,o.yAxis[0].axisLabel.formatter="{value}%"}switch(a){case"chart_post_hour":var l="",s=["#AEDD8C","#72C4FF"];l+='{b}<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+s[0]+'"></span>{a}: {c}%<br />',o.tooltip.formatter=l;break;case"chart_post_hour_compare":for(var l="{b}<br>",s=["#72C4FF","#AEDD8C"],c=0;c<2;c++)l+='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+s[c]+'"></span>{a'+c+"}: {c"+c+"}%<br />";o.tooltip.formatter=l}i.data2.length>0?o.series=[{name:e[0],symbol:"roundRect",symbolSize:4,type:"line",data:i.data},{name:e[1],symbol:"roundRect",symbolSize:4,type:"line",data:i.data2}]:o.series=[{name:e,symbol:"roundRect",symbolSize:4,type:"line",data:i.data}],B_Chart._getEChart("line",a,o)},_chartMap:function(e,a,t){if(t&&t.length>0){for(var i=[],o=0,c="",l=0;l<t.length;l++)$.each(t[l],function(e,a){var t=(100*a).toFixed(1);i.push({name:e,value:t}),parseFloat(t)>parseFloat(o)&&(o=t),l<5&&(c+=F_Face_Html._htmlChart(l,e,t))});$("#"+a).html(c),o=Math.ceil(o);var s={};s.tooltip={trigger:"item"},s.legend=null,s.visualMap={min:0,max:o,left:"right",top:"bottom",text:["高(%)","低(%)"],calculable:!0,color:["#51c7ef","#91cfe4","#dde7ea"]},s.series=[{name:"地域分布(%)",type:"map",mapType:"china",label:{normal:{show:!1},emphasis:{show:!0}},roam:!1,itemStyle:{normal:{label:{show:!1},borderWidth:1,borderColor:"#ffffff"},emphasis:{label:{show:!0}}},data:i}],B_Chart._getEChart("map",e,s)}},_htmlList:function(e,a,t){if(t&&"undefined"!=typeof t){var i='<table class="tg-table-face table">';i+="<thead>",i+="<tr><th>关注贴吧</th><th>玩家占比</th><th>关注人数</th></tr>",i+="</thead><tbody>";for(var o=0,c=0,l=0;l<t.length;l++)$.each(t[l],function(e,a){o+=parseInt(a)});for(var l=0;l<t.length;l++)$.each(t[l],function(a,t){o>0&&(c=(parseInt(t)/o*100).toFixed(1)),i+=F_Face_Html._htmlListFormat(e,l,a,c,t)});i+="</tbody>",i+="</table>",a.html(i)}},_htmlListFormat:function(e,a,t,i,o){var c="";return c+='<tr><td title="'+t+'"><b>'+(a+1)+"</b>"+t+"</td><td>"+i+"%</td><td>"+o+"</td></tr>"},_htmlChart:function(e,a,t){var i="<dl>";return e+=1,1==e&&(i+='<dt class="py_colorg py_mplist20">#</dt><dt class="py_colorg py_mplist40">地域</dt><dt class="py_colorg py_mplist40">占比</dt>'),5==e?(i+='<dd class="py_colorg py_rkltbdnone py_mplist20">'+e+"</dd>",i+='<dd class="py_mplist40 py_rkltbdnone">'+a+"</dd>",i+='<dd class="py_mplist40 py_rkltbdnone">'+t+"%</dd>"):(i+='<dd class="py_colorg py_mplist20">'+e+"</dd>",i+='<dd class="py_mplist40">'+a+"</dd>",i+='<dd class="py_mplist40">'+t+"%</dd>"),i+="</dl>"},_htmlLine:function(e,a){var t=["line-a","line-b","line-c","line-d","line-e","line-f","line-g"];if(a&&"undefined"!=typeof a){for(var i=0,o=0,c="",l=0;l<a.length;l++)$.each(a[l],function(e,a){i+=parseInt(a)});for(var l=0;l<a.length;l++)$.each(a[l],function(e,a){o=0==i?0:(parseInt(a)/i*100).toFixed(1),c+='<ul class="contrast-list single-list">',c+='<li class="word-des">'+e+'</li><li class="percent"><span>'+o+"%</span></li>",c+='<li class="des">共'+a+"人关注</li>",c+='<li class="line">',c+='<div class="line-bg fl">',o=2*parseFloat(o),o=o>100?100:o,c+='<div class="right-percent '+t[l]+'" style="width: '+o+'%"></div>',c+="</div></li></ul>"});e.html(c)}},_htmlGender:function(e){var a="";if(e&&e.length>0){for(var t=0,i=0,o=0,c=0,l=0,s=0;s<e.length;s++)$.each(e[s],function(e,a){switch(e){case"男":i=parseInt(a);break;case"女":o=parseInt(a)}});t=i+o,t>0&&(i=(i/t*100).toFixed(0),o=100-i,c=200*(i/100),l=200*(o/100)),a+="<ul>",a+='<li class="man">',a+='<div class="color" style="height:'+c+'px"></div>',a+="<p>男性玩家</p>",a+='<i class="graph-icon"></i>',a+="<b>"+i+"%</b>",a+="<span>占全部玩家的</span>",a+='<li class="woman">',a+='<div class="color" style="height:'+l+'px"></div>',a+="<p>女性玩家</p>",a+='<i class="graph-icon"></i>',a+="<b>"+o+"%</b>",a+="<span>占全部玩家的</span>",a+="</li>",a+="</ul>"}return a}},F_Face_Common={_cache:{data:{1:{refresh:!1,game_id:0,open:"quick",choose:"全用户",last_choose:"",posted:"",buff:""},2:{refresh:!1,game_id:0,open:"quick",choose:"全用户",last_choose:"",posted:"",buff:""},3:{refresh:!1,game_id:0,open:"quick",choose:"全用户",last_choose:"",posted:"",buff:""}}},_init:{influence:["高号召","中号召","低号召"],active:["高活跃","中活跃","低活跃"]},_tagsGroup:[["活跃度","active_class"],["号召力","influence_level"],["关注类目","interest_classify"],["个人魅力","charm_level"],["付费能力","pay_ability"],["发言偏好","post_quality"],["生命周期","game_lifecycle"],["抱怨程度","complain_level"],["吧务","op_type"],["地域","province"]],_tags:[["高活跃","中活跃","低活跃"],["高号召","中号召","低号召"],["追星","影视","体育","音乐","动漫","文学","科技"],["高魅力","中魅力","低魅力"],["高付费"],["高质用户","普通用户","灌水用户","垃圾用户"],["新手玩家","轻度玩家","重度玩家","流失玩家","回归玩家"],["从不抱怨","经常抱怨","偶尔抱怨"],["吧务"],["广东","江苏","北京","上海","浙江","山东","四川","福建","河南","辽宁","河北","安徽","陕西","湖南","天津","重庆","黑龙江","广西","山西","江西","吉林","云南","贵州","内蒙古","甘肃","新疆","宁夏","海南","台湾","西藏","香港","澳门","青海","湖北"]],_tagsHot:[["全用户",""],["高活跃","active_class"],["高号召","influence_level"],["高付费","pay_ability"],["高魅力","charm_level"],["经常抱怨","complain_level"],["高质用户","post_quality"],["垃圾用户","post_quality"],["普通用户","post_quality"],["新手玩家","game_lifecycle"],["流失玩家","game_lifecycle"],["重度玩家","game_lifecycle"],["北京","province"],["上海","province"],["江苏","province"],["浙江","province"],["广东","province"],["河南","province"],["河北","province"],["山东","province"]],_openTags:function(e,a){B_Pop._init("close");var t=F_Face_Common._cache.data[a].choose;switch(e){case"quick":var i='<div class="py_layer b_borderRadius py_bgff"><div class="py_lyarea"><div class="py_lytitle"><h4>快速标签</h4><b onclick="B_Pop._init(\'close\');">╳</b></div><div class="py_lyfew">';$.each(F_Face_Common._tagsHot,function(e,a){i+='<button data-name="'+a[1]+'"',t==a[0]&&(i+=' class="btnhover"'),i+=">"+a[0]+"</button>"}),i+='</div><div class="clearfix"></div><div class="py_lycheck"><button class="py_lylinkbtn b_borderRadius" onclick="F_Face_Common._openTags(\'detail\',\''+a+"')\">展开详细标签</button> <button class=\"py_lycheckbtn b_borderRadius\" onclick=\"F_Face_Common._checkTags('quick','"+a+"')\">确定</button></div></div></div>",B_Pop._init("open",{type:1,shift:2,title:!1,closeBtn:!1,shadeClose:!1,area:["auto","auto"],content:i}),$(".py_lyfew button").click(function(){$(this).addClass("btnhover").siblings().removeClass("btnhover").end()});break;case"detail":var i='<div class="py_layer b_borderRadius py_bgff"><div class="py_lyarea"><div class="py_lytitle"><h4>详细标签</h4><b onclick="B_Pop._init(\'close\');">╳</b></div><div class="py_lymore">',o="";$.each(F_Face_Common._tagsGroup,function(e,a){switch(i+="<dl",e){default:i+=' class="py_auto"',i+="><dt>"+a[0]+"</dt>",$.each(F_Face_Common._tags[e],function(e,o){i+='<dd><input type="checkbox" name="'+a[1]+'" value="'+o+'"',t.indexOf(o)>-1&&(i+=" checked"),i+=">　"+o+"</dd>"});break;case 9:i+="><dt>"+a[0]+"</dt>",i+='<dd><div class="py_select b_borderRadius">',i+='<div class="py_selarea"><span name="'+a[1]+'">不限制</span><i></i></div>',i+="<ul>",i+="<li>不限制</li>",$.each(F_Face_Common._tags[e],function(e,a){i+="<li>"+a+"</li>",t.indexOf(a)>-1&&(o=a)}),i+="</ul>",i+="</div></dd>"}i+="</dl>"}),i+='</div><div class="py_clear"></div><div class="py_lycheck"><button class="py_lylinkbtn b_borderRadius" onclick="F_Face_Common._openTags(\'quick\',\''+a+"')\">返回快捷标签</button> <button class=\"py_lycheckbtn b_borderRadius\" onclick=\"F_Face_Common._checkTags('detail','"+a+"')\">确定</button></div></div></div>",B_Pop._init("open",{type:1,shift:2,title:!1,closeBtn:!1,shadeClose:!1,area:["auto","auto"],content:i}),""!=o&&$(".py_selarea span").html(o),$(".py_lymore input[type=checkbox]").each(function(){$(this).click(function(){F_Face_Common._isCheckedTag($(this).attr("name"),$(this).val())})}),$(".py_selarea").click(function(){$(".py_select ul").is(":visible")?$(".py_select ul").hide():$(".py_select ul").show()}),$(".py_select ul li").click(function(){var e=$(this).html();$(".py_select span").html(e),$(".py_select ul").hide()})}},_isCheckedTag:function(e,a){$('.py_lymore input[type=checkbox][name="'+e+'"]').each(function(){var e=$(this).val();e!=a&&$(this).prop("checked",!1)})},_checkTags:function(e,a){var t="",i="";switch(e){case"quick":$(".py_lyfew button").each(function(){$(this).hasClass("btnhover")&&(t=$(this).text(),i=$(this).attr("data-name")+"="+$(this).text())});break;case"detail":var o=[],c=[],l=0;$.each(F_Face_Common._tagsGroup,function(e,a){switch(e){default:$('.py_lymore input[type=checkbox][name="'+a[1]+'"]').each(function(){1==$(this).prop("checked")&&(o[l]=$(this).val(),c[l]=a[1]+"="+$(this).val(),l++)});break;case 9:var t=$(".py_selarea span").html();"不限制"!=t&&""!=t&&(o[l]=t,c[l]=a[1]+"="+t,l++)}}),o.length>0&&(t=o.join(","),i=c.join(","))}if(""==t)return B_Pop._init("msg",{content:"您尚未选择任何标签，请选择"}),!1;switch(B_Pop._init("close"),$("#changeTagZone"+a+" span").html(t).attr("title",t),F_Face_Common._cache.data[a].open=e,F_Face_Common._cache.data[a].choose=t,F_Face_Common._cache.data[a].posted=i,a+""){case"1":F_FaceDetail_Info._getUnion(a);break;case"2":case"3":F_FaceCompare_Info._getUnion(a)}},_changeTagOpen:function(e){F_Face_Common._openTags(F_Face_Common._cache.data[e].open,e)},_postData:function(e){var a={},t="";switch(t=F_Face_Common._cache.data[e].choose,e+""){case"3":a.project_id=M_Init._gameIdRight;break;default:a.project_id=M_Init._gameDetailId}var i=F_Face_Common._cache.data[e].last_choose;if(a.project_id==F_Face_Common._cache.data[e].game_id&&""!=i&&t==i)return!1;F_Face_Common._cache.data[e].last_choose=t,F_Face_Common._cache.data[e].game_id=a.project_id;var o=F_Face_Common._cache.data[e].posted;if(""!=o){var c=[];c=o.split(","),c.length>0&&$.each(c,function(e,t){var i=[];i=t.split("="),i.length>0&&""!=i[0]&&(a[i[0]]=i[1])})}return a=B_Common._postData(a)}};