var F_PayConversion_Entrance={_init:function(){if(B_Login._checkUpdate(),M_HeadFoot._headShow(1),"demo"!=M_Init._controller&&B_User._isDemoUser())B_Login._openLogin("background");else{switch(M_Init._clean(),M_Init._controller){case"demo":M_Init._api.innerOperationFirstPay="demoInnerOperationFirstPay";break;default:M_Init._api.innerOperationFirstPay="innerOperationFirstPay"}M_Init._dateCache.begin=M_Init._dateChoose.begin,M_Init._dateCache.end=M_Init._dateChoose.end,M_Common._getOrderGame("payconversion","","1-4-3"),B_Date._chooseSection({autoCommit:!1,todayValid:!1},1,M_Init._dateChoose.begin,M_Init._dateChoose.end,function(a,_){a==M_Init._dateCache.begin&&M_Init._dateCache.end==_||(M_Init._dateCache.begin=a,M_Init._dateCache.end=_,F_PayConversion_Info._getInfo())})}}},F_PayConversion_Info={_init:[{type:"togetherTab",name:"新增付费分析",tab:["首日付费率","首周付费率","首月付费率"],tips:[{},{position:"second",content:["首日付费率：在新增当日就进行付费的玩家占当日新增玩家比例","首周付费率：在新增7日内（含当日）进行付费的玩家占当日新增玩家比例","首月付费率：在新增30日内（含当日）进行付费的玩家占当日新增玩家比例"]}]},{type:"switchTab",name:"玩家首付周期",tab:["已玩天数","累计游戏时长"],tips:[{},{position:"second",content:["所选时期内的新增付费玩家，按照其已玩天数（首付日期-新增日期）进行分布","所选时期内的新增付费玩家，按照其累计进行游戏的时长进行分布"]}]},{type:"switchTab",name:"玩家首付等级",tab:[],tips:[{position:"first",content:["所选时期内的新增付费玩家，第一次付费时的等级分布"]}]},{type:"switchTab",name:"玩家首付金额",tab:[],tips:[{position:"first",content:["所选时期内的新增付费玩家，第一次付费时的金额分布"]}]},{type:"switchTab",name:"玩家首付充值包类型",tab:[],tips:[{position:"first",content:["所选时期内的新增付费玩家，第一次付费时的充值包类型分布"]}]}],_port:[[[{name:"首日付费率",key:"axis_first_pay_rate|y_axis_first_pay_rate_day"}],[{name:"首周付费率",key:"axis_first_pay_rate|y_axis_first_pay_rate_week"}],[{name:"首月付费率",key:"axis_first_pay_rate|y_axis_first_pay_rate_month"}]],[[{name:"付费人数",key:"axis_first_pay_total_oltime|y_axis_first_pay_oldays"}],[{name:"付费人数",key:"axis_first_pay_total_oltime|y_axis_first_pay_total_oltime"}]],[[{name:"付费人数",key:"axis_first_pay_level|y_axis_first_pay_level"}]],[[{name:"付费人数",key:"axis_first_pay_amount|y_axis_first_pay_amount"}]],[[{name:"付费人数",key:"axis_first_pay_item|y_axis_first_pay_item"}]]],_domInit:function(){M_Inside._htmlChartTable($("#ct_main_area"),F_PayConversion_Info._init),M_Inside._downloadCsv(),F_PayConversion_Info._getInfo()},_getInfo:function(){for(var a=M_Init._dateCache.begin,_=M_Init._dateCache.end,t=[],e=0;e<F_PayConversion_Info._init.length;e++)t.push("bs_chart_"+e+"_0");var i={};i.start_date=a,i.end_date=_,i.game_id=M_Init._gameId,i=B_Common._postData(i),B_Port._ajax(M_Init._api.innerOperationFirstPay,"get",!0,i,function(){for(var a=0;a<t.length;a++)$("#"+t[a]).html(B_Pre._loading())},function(){for(var a=0;a<t.length;a++)$("#"+t[a]).html("")},function(a,_){if(a){M_Init._dataCache.data=a;for(var t=0;t<F_PayConversion_Info._init.length;t++)if(F_PayConversion_Info._init[t].tab.length>0){M_Init._dataCache["position_"+t]||(M_Init._dataCache["position_"+t]=0);for(var e=0;e<F_PayConversion_Info._init[t].tab.length;e++)if(M_Init._dataCache["position_"+t]==e){F_PayConversion_Info._chartHtml(t,e),M_Inside._chartTableIcon(F_PayConversion_Info._init[t].type,t,e);break}M_Inside._tabChangePerChart(t,F_PayConversion_Info._init[t].type,"payconversion")}else F_PayConversion_Info._chartHtml(t,"0"),M_Inside._chartTableIcon(F_PayConversion_Info._init[t].type,t,"0")}},function(a,_,e){for(var i=0;i<t.length;i++)$("#"+t[i]).html(B_Pre._empty(_))})},_chartHtml:function(a,_,t){M_Init._dataCache["position_"+a]=_;var e=M_Init._dataCache.data,i={x_axis:[],y_axis:[],yFormat:""},n={},o=50,s="";switch(a+""){case"0":i.xFormatDate=!0,i.yFormat="%",i.tooltip={num:1,unit:"%"},s="%";break;case"1":case"2":case"3":case"4":i.tooltip={num:1,unit:"人"},s=""}switch(a+""){case"0":n={head:["日期"],body:[]};break;case"1":switch(_+""){case"0":n={head:["已玩游戏天数"],body:[]};break;case"1":n={head:["累计游戏时长"],body:[]}}break;case"2":n={head:["首付等级"],body:[]};break;case"3":n={head:["首付金额"],body:[]};break;case"4":n={head:["首付充值包类型"],body:[]}}for(var r=0;r<F_PayConversion_Info._port[a][_].length;r++){var y=F_PayConversion_Info._port[a][_][r].key.split("|"),d=F_PayConversion_Info._port[a][_][r].name;switch(a+""){case"0":if(o=50,n.head.push(d),e[y[0]][y[1]]){var h=e[y[0]][y[1]];i.x_axis=e[y[0]].x_axis_first_pay_rate;for(var c=0;c<h.length;c++)n.body[c]||(n.body[c]=[i.x_axis[c]]),n.body[c].push(h[c]+s);i.y_axis.push({name:d,data:h})}break;case"1":if(o=20,n.head.push(d),e[y[0]][y[1]]){var h=e[y[0]][y[1]];switch(_+""){case"0":i.x_axis=e[y[0]].x_axis_first_pay_oldays;break;case"1":i.x_axis=e[y[0]].x_axis_first_pay_total_oltime}for(var c=0;c<h.length;c++)i.x_axis[c]=i.x_axis[c].replace("&gt;",">"),i.x_axis[c]=i.x_axis[c].replace("&lt;","<"),n.body[c]||(n.body[c]=[i.x_axis[c]]),n.body[c].push(h[c]);i.y_axis.push({name:d,data:h})}break;case"2":if(o=40,e[y[0]][y[1]]){var h=e[y[0]][y[1]];n.head.push(d),i.x_axis=e[y[0]].x_axis_first_pay_level;for(var c=0;c<h.length;c++)i.x_axis[c]=i.x_axis[c]+"级",n.body[c]||(n.body[c]=[i.x_axis[c]]),n.body[c].push(h[c]);i.y_axis.push({name:d,data:h})}break;case"3":if(o=20,n.head.push(d),e[y[0]][y[1]]){var h=e[y[0]][y[1]];i.x_axis=e[y[0]].x_axis_first_pay_amount;for(var c=0;c<h.length;c++)i.x_axis[c]=i.x_axis[c].replace("&gt;",">"),i.x_axis[c]=i.x_axis[c].replace("&lt;","<"),i.x_axis[c]+="元",n.body[c]||(n.body[c]=[i.x_axis[c]]),n.body[c].push(h[c]);i.y_axis.push({name:d,data:h})}break;case"4":if(o=20,n.head.push(d),e[y[0]][y[1]]){var h=e[y[0]][y[1]];i.x_axis=e[y[0]].x_axis_first_pay_item;for(var c=0;c<h.length;c++)n.body[c]||(n.body[c]=[i.x_axis[c]]),n.body[c].push(h[c]);i.y_axis.push({name:d,data:h})}}}n.name=M_Inside._tableName(F_PayConversion_Info._init,a,_,M_Init._dateCache.begin,M_Init._dateCache.end),_=0,M_Init._dataCache[a+"_"+_]=n,M_Inside_Chart._chartData(o,"bs_chart_"+a+"_"+_,i),M_Inside._tableHtml(1,a+"_"+_)}};