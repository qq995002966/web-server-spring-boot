var F_RankApp_Entrance={_init:function(){B_Login._checkUpdate(),M_HeadFoot._headShow(2),M_Dom._menuList("舆情分析","3-4-2"),M_Game._htmlGameVisitHide("outsideRankApp"),B_User._isDemoUser()?B_Login._openLogin("background"):(M_Init._clean(),F_RankApp_Info._getFirstRankDate())}},F_RankApp_Info={_cache:{},_getFirstRankDate:function(){B_Port._ajax("appstoreDate","get",!0,null,null,null,function(t,e){t&&t.date?M_Init._dateCache.end=t.date:M_Init._dateCache.end=M_Init._dateChoose.end,F_RankApp_Info._domInit()},null)},_domInit:function(){B_Date._chooseSingle({autoCommit:!1,todayValid:!1},1,M_Init._dateCache.end,M_Init._dateCache.end,function(t,e){t!=M_Init._dateCache.end&&(M_Init._dateCache.end=t,F_RankApp_Info._getList(1))}),M_Init._dateCache.platId=1,M_Init._dateCache.typeId=1,M_Init._dateCache.listId=3;var t=M_Outside._dropHtml("bs_device","设备",M_Game._appPlatType,"tg-area-icon1"),e=M_Outside._dropHtml("bs_list","榜单类型",M_Game._appListType,"tg-area-icon2",2),a=M_Outside._dropHtml("bs_type","游戏类型",M_Game._appGameType,"tg-area-icon3"),_=M_Outside._tableHtml("bs_table","Appstore排行榜");$("#headerTop").prepend(t+e+a),$("#ct_main_area").html(_),M_Inside._dropShow(),M_Inside._dropLeave(),M_Inside._dropSelected(function(t){M_Init._dateCache.platId=t,F_RankApp_Info._getList(1)},"bs_device"),M_Inside._dropSelected(function(t){M_Init._dateCache.listId=t,F_RankApp_Info._getList(1)},"bs_list"),M_Inside._dropSelected(function(t){M_Init._dateCache.typeId=t,F_RankApp_Info._getList(1)},"bs_type"),F_RankApp_Info._getList(1)},_getList:function(t){var e=$("#bs_table .table-out-wrap"),a=$("#bs_table .tg-page-list"),_={};_.data_date=M_Init._dateCache.end,_.device_type=M_Init._dateCache.platId,_.list_type=M_Init._dateCache.listId,_.app_type=M_Init._dateCache.typeId,_.index=(t-1)*B_Page._size,_.limit=B_Page._size,_=B_Common._postData(_),B_Port._ajax("appstoreRank","get",!0,_,function(){e.html(B_Pre._loading()),a.html("")},function(){e.html("")},function(_,n){_&&_.total>0?(e.html(F_RankApp_Info._htmlList(_.data)),a.html(B_Page._show({total:_.total,page:t},"number")),B_Page._click(t,function(t){F_RankApp_Info._getList(t)})):e.html(B_Pre._empty("暂无数据"))},function(t,a,_){e.html(B_Pre._empty(a))})},_htmlStar:function(t){t=t?t:0;for(var e=Math.floor(t),a=t>e,_="",t=1;t<6;t++)t<=e?_+='<i class="tg-icon full-blue-star"></i>':a?(a=!1,_+='<i class="tg-icon half-star"></i>'):_+='<i class="tg-icon full-gray-star"></i>';return'<div class="star-level">'+_+"</div>"},_htmlList:function(t){var e="";e+='<table class="tg-table table table-bordered">',e+='<thead class="boxshadow"><tr>',e+="<th>排名</th>",e+="<th>游戏</th>",e+='<th class="game-tag">Appstore评价</th>',e+="<th>评价总数</th>",e+="<th>正面评价数</th>",e+="<th>负面评价数</th>",e+="<th>操作</th>",e+="</tr></thead>",e+="<tbody>";for(var a=0;a<t.length;a++)e+="<tr>",e+="<td>"+t[a].rank,e+="</td>",t[a].project_id&&"-"!=t[a].project_id?(e+='<td><img src="'+t[a].app_img+'" alt="'+t[a].app_name+'" onclick="M_Outside._redirectLight('+t[a].project_id+')">',e+='<div class="table-des"><p onclick="M_Outside._redirectLight('+t[a].project_id+')">'+t[a].app_name+"</p><span>开发商："+t[a].app_author+"</span></div>"):(e+='<td><img src="'+t[a].app_img+'" alt="'+t[a].app_name+'" onclick="B_Login._openPlan(\''+t[a].app_name+"');\">",e+='<div class="table-des"><p onclick="B_Login._openPlan(\''+t[a].app_name+"');\">"+t[a].app_name+"</p><span>开发商："+t[a].app_author+"</span></div>"),e+="</td>",e+="<td>"+(t[a].app_score?t[a].app_score:"-"),e+=this._htmlStar(t[a].app_score),e+="</td>",e+='<td><div class="user-comment">'+t[a].comment_num,e+="</div></td>",e+='<td><div class="user-comment">'+t[a].positive_num,e+="</div></td>",e+='<td><div class="user-comment">'+t[a].negative_num,e+="</div></td>",e+="<td>",e+=t[a].project_id&&"-"!=t[a].project_id?'<button class="tg-main-btn" onclick="M_Outside._redirectLight('+t[a].project_id+')">查看口碑</button><!--button class="tg-assist-btn" onclick="M_Outside._redirectAtlas('+t[a].project_id+')">游戏图谱</button-->':'<button class="tg-assist-btn" onclick="B_Login._openPlan(\''+t[a].app_name+"');\">申请收录</button>",e+="</td>",e+="</tr>";return e+="</tbody>",e+="</table>"}};