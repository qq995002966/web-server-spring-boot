var F_Assistant_Entrance={_init:function(){B_Login._checkUpdate(),M_HeadFoot._headShow(2),M_Dom._menuList("舆情分析","3-1-3"),B_User._isDemoUser()?B_Login._openLogin("background"):(M_Init._clean(),B_Game._checkAuthMenu()?(M_Game._htmlGameVisitHide("outsideAssistant"),F_Assistant_Info._domInit(),F_Assistant_Info._getList(1),$(".tg-main-btn").click(function(){F_Assistant_Common._openAdd("","添加")})):($("#headerTop").html(""),M_Game._htmlGameVisitHide("outsideAssistant"),F_Assistant_Info._domDemo()))}},F_Assistant_Info={_cache:{},_domDemo:function(){var t='                    <img src="'+B_Common._cdnImgUrl()+'2.0/userlimit/auto.png" alt="" class="adver-bg">                    <div class="adver-des">                        <h3>及时获取关键词实时舆情数据</h3>                        <p>自有创建各类关键词监控任务，通过邮件及时获取用户在全国贴吧、论坛中的反馈信息，大幅提升舆情监控效率，提早获得舆情爆发点。</p>                        <button class="tg-main-btn" onclick="B_Jump._go(\'openUrl\',\''+B_Common._qqUrl()+"')\">在线咨询</button>                    </div>";$("#contentPart").html(t)},_workUpdate:function(t){B_Port._ajax("assistantUpdate","post",!0,t,function(){B_Pop._init("load",{type:1,time:10})},function(){B_Pop._init("close")},function(t,n){B_Pop._init("msg",{content:"状态更新成功"}),setTimeout(function(){B_Pop._init("close")},1e3)},function(t,n,s){B_Pop._init("alert",{content:B_Pre._empty(n)})})},_workDel:function(t){var n={};n.id=t,n.project_id=0,n=B_Common._postData(n),B_Port._ajax("assistantDel","post",!0,n,function(){B_Pop._init("load",{type:1,time:10})},function(){B_Pop._init("close")},function(t,n){B_Pop._init("msg",{content:"删除成功"}),setTimeout(function(){B_Pop._init("close"),F_Assistant_Info._pageRefresh("del")},1e3)},function(t,n,s){B_Pop._init("alert",{content:B_Pre._empty(n)})})},_pageRefresh:function(t){var n=F_Assistant_Info._cache.page;switch(t){case"del":F_Assistant_Info._cache.total=F_Assistant_Info._cache.total>0?F_Assistant_Info._cache.total-1:0,n=Math.ceil(F_Assistant_Info._cache.total/B_Page._size),n=F_Assistant_Info._cache.page<=n?F_Assistant_Info._cache.page:n}F_Assistant_Info._getList(n)},_getList:function(t){F_Assistant_Info._cache.page=t;var n=parseInt(t)<=0?0:(t-1)*B_Page._size,s=$("#lt_item_list"),i=$("#lt_forum_page"),a={};a.index=n,a.limit=B_Page._size,a=B_Common._postData(a),B_Port._ajax("assistantGetQuery","get",!0,a,function(){s.html(B_Pre._loading("b_padding30")),i.html("")},function(){s.html(""),i.html("")},function(a,_){a.get&&a.get.length>0?(F_Assistant_Info._cache.assistantData=a.get,s.html(F_Assistant_Info._htmlList(a.get,n)),F_Assistant_Info._cache.total=a.user_center_cnt,i.html(B_Page._show({total:a.user_center_cnt,page:t},"number")),B_Page._click(t,function(t){F_Assistant_Info._getList(t),B_Jump._top()}),$('input[type="checkbox"]').bootstrapSwitch("size","small"),$('input[type="checkbox"]').on("switchChange.bootstrapSwitch",function(t,n){var s=$(this).attr("id"),i="";if(F_Assistant_Info._cache.assistantData){for(var a=0;a<F_Assistant_Info._cache.assistantData.length;a++)if(F_Assistant_Info._cache.assistantData[a].id==s){i=F_Assistant_Info._cache.assistantData[a];break}i&&(i.status=n?1:0,i=B_Common._postData(i),F_Assistant_Info._workUpdate(i))}""==i&&B_Pop._init("confirm",{skin:"layerCheck-class",content:"数据读取失败",btn:"刷新",title:"提示",closeBtn:0},function(){top.window.location.reload()})})):s.html('<div class="b_empty">快去添加新任务吧！</div>')},function(t,n,i){s.html(B_Pre._empty(n))})},_htmlList:function(t,n){for(var s='<table class="tg-table table table-bordered"><thead class="boxshadow">            <tr>            <th>任务监控名称</th>            <th>游戏名称</th>            <th>监测词汇</th>            <th>上次推送时间</th>            <th>邮件通知状态</th>            <th>操作</th>        </tr></thead><tbody>',i=0;i<t.length;i++)s+="<tr>",s+="<td>"+t[i].email_title+"</td>",s+='<td class="game-name"><img src="'+B_Game._imgUrl(t[i].project_id)+'"><p>'+t[i].project_name+"</p></td>",s+="<td>"+t[i].keywords+"</td>",s+="<td>"+(t[i].last_send_time&&""!=t[i].last_send_time?t[i].last_send_time:"尚未推送")+"</td>",s+="<td>"+(0==t[i].status?'<input type="checkbox" id="'+t[i].id+'" />':'<input id="'+t[i].id+'" type="checkbox" checked />')+"</td>",s+='<td><button class="tg-main-btn" onclick="F_Assistant_Common._openAdd('+t[i].id+',\'编辑\')">修改</button><button class="tg-assist-btn" onclick="F_Assistant_Common._delConfirm('+t[i].id+",'"+t[i].email_title+"')\">删除</button>",s+="</td></tr>";return s+="</tbody></table>"},_domInit:function(){var t="";t+='            <div class="tg-table-layout blockpart col-lg-12 col-md-12 col-sm-12 col-xs-12">                <h3>监控中的任务</h3>                <div class="boxshadow tg-table-content">                    <div class="tg-table-wrap tg-table-no-padding tg-height-hight">                        <div class="table-out-wrap" id="lt_item_list"></div>                        <ul class="tg-page-list" id="lt_forum_page"></ul>                    </div>                </div>            </div>',t+="",$("#headerTop").html('<span>您可以定制推送消息发送到邮箱，图表化数据可以让您快速了解所关注的关键词，助您发现问题。</span><button class="tg-main-btn">添加任务</button>'),$("#mainContent").addClass("alert-task-part"),$("#ct_main_area").html(t)}},F_Assistant_Common={_init:{hour:["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],week:[["星期一",2],["星期二",3],["星期三",4],["星期四",5],["星期五",6],["星期六",7],["星期日",1]]},_openAdd:function(t,n){B_Pop._init("close");var s=t?"outsideassistant_s.html?id="+t:"outsideassistant_s.html";B_Pop._init("open",{type:2,scroll:!0,title:n+"舆情助手",width:"850px",height:"610px",shift:2,content:s},"")},_delConfirm:function(t,n){B_Pop._init("confirm",{skin:"layerCheck-class",content:"确实要删除【"+n+"】监控任务么？",btn:["确认","取消"],title:"操作提示"},function(){F_Assistant_Info._workDel(t)},function(){B_Pop._init("close")})}};