var F_ChannelEarn_Entrance={_init:function(){if(B_Login._checkUpdate(),M_HeadFoot._headShow(1),"demo"!=M_Init._controller&&B_User._isDemoUser())B_Login._openLogin("background");else{switch(M_Init._clean(),M_Init._controller){case"demo":M_Init._api.innerOperationChannelPay="demoInnerOperationChannelPay";break;default:M_Init._api.innerOperationChannelPay="innerOperationChannelPay"}M_Init._dateCache.begin=M_Init._dateChoose.begin,M_Init._dateCache.end=M_Init._dateChoose.end,M_Common._getOrderGame("channelearn","","1-6-2"),B_Date._chooseSection({autoCommit:!1,todayValid:!1},1,M_Init._dateChoose.begin,M_Init._dateChoose.end,function(n,a){n==M_Init._dateCache.begin&&M_Init._dateCache.end==a||(M_Init._dateCache.begin=n,M_Init._dateCache.end=a,F_ChannelEarn_Info._getInfo())})}}},F_ChannelEarn_Info={_init:[{type:"table",name:"收入指标",tab:[],tips:[{position:"first",content:"收入：所选时期内该渠道的收入总金额<br>累加付费次数：所选时期内该渠道的每日累加付费次数（不去重）<br>日均付费人数：所选时期内该渠道的每日付费人数均值<br>日均付费率：所选时期内该渠道的每日付费率均值<br>日均ARPU：所选时期内该渠道当天每活跃玩家的人均收入<br>日均ARPPU：所选时期内该渠道当天每付费玩家的人均收入"}]},{type:"togetherTab",name:"渠道收入比对",tab:["日收入","日付费次数","日付费人数","日付费率","日ARPU","日ARPPU"],tips:[{},{position:"second",content:["所选渠道当天的收入总金额","所选渠道当天的付费总次数","所选渠道当天的付费总人数","所选渠道当天的付费人数占其当天活跃玩家的比例","所选渠道当天每活跃玩家的人均收入","所选渠道当天每付费玩家的人均收入"]}]}],_port:[[[{name:"收入指标",key:"channel_table"}]],[[{name:"日收入（元）",key:"channel_compare|y_axis_pay_amount"}],[{name:"日付费次数（次）",key:"channel_compare|y_axis_pay_times"}],[{name:"日付费人数",key:"channel_compare|y_axis_pay_num"}],[{name:"日付费率",key:"channel_compare|y_axis_pay_rate"}],[{name:"日ARPU（元）",key:"channel_compare|y_axis_arpu"}],[{name:"日ARPPU（元）",key:"channel_compare|y_axis_arppu"}]]],_domInit:function(){M_Inside._htmlChartTable($("#ct_main_area"),F_ChannelEarn_Info._init),F_ChannelEarn_Info._getInfo(),M_Inside._downloadCsv()},_getInfo:function(){for(var n=M_Init._dateCache.begin,a=M_Init._dateCache.end,e=[],t=0;t<F_ChannelEarn_Info._init.length;t++)switch(F_ChannelEarn_Info._init.type){case"table":e.push("bs_table_"+t+"_0");break;default:e.push("bs_chart_"+t+"_0")}var _={};_.start_date=n,_.end_date=a,_.game_id=M_Init._gameId,_=B_Common._postData(_),B_Port._ajax(M_Init._api.innerOperationChannelPay,"get",!0,_,function(){for(var n=0;n<e.length;n++)$("#"+e[n]).html(B_Pre._loading())},function(){for(var n=0;n<e.length;n++)$("#"+e[n]).html("")},function(n,a){if(n){M_Init._dataCache.data=n;for(var e=0;e<F_ChannelEarn_Info._init.length;e++)if(F_ChannelEarn_Info._init[e].tab.length>0){M_Init._dataCache["position_"+e]||(M_Init._dataCache["position_"+e]=0);for(var t=0;t<F_ChannelEarn_Info._init[e].tab.length;t++)if(M_Init._dataCache["position_"+e]==t){F_ChannelEarn_Info._chartHtml(e,t),M_Inside._chartTableIcon(F_ChannelEarn_Info._init[e].type,e,t);break}M_Inside._tabChangePerChart(e,F_ChannelEarn_Info._init[e].type,"channelearn")}else F_ChannelEarn_Info._chartHtml(e,"0"),M_Inside._chartTableIcon(F_ChannelEarn_Info._init[e].type,e,"0")}},function(n,a,t){for(var _=0;_<e.length;_++)$("#"+e[_]).html(B_Pre._empty(a))})},_chartHtml:function(n,a){M_Init._dataCache["position_"+n]=a;var e=M_Init._dataCache.data,t={x_axis:[],y_axis:[],xFormatDate:!1,yFormat:"",legendSelectMode:!1},_="",i={head:[],body:[]},o=50;switch(n+""){case"0":i={head:["渠道名称","总收入(元)","累加付费次数（次）","日均付费人数","日均付费率","日均ARPU(元)","日均ARPPU(元)"],body:[]};break;case"1":switch(t.xFormatDate=!0,a+""){case"0":case"4":case"5":t.yFormat="元",t.tooltip={num:1,unit:"元"},_="元";break;case"1":t.yFormat="次",t.tooltip={num:1,unit:"次"},_="次";break;case"2":t.yFormat="",t.tooltip={num:1,unit:""},_="";break;case"3":t.yFormat="%",t.tooltip={num:3,unit:"%"},_="%"}i={head:["日期"],body:[]}}for(var r=0;r<F_ChannelEarn_Info._port[n][a].length;r++){var h=F_ChannelEarn_Info._port[n][a][r].key.split("|"),c=F_ChannelEarn_Info._port[n][a][r].name;switch(n+""){case"0":if(e[h[0]])for(var l=e[h[0]],d=0;d<l.length;d++)i.body[d]=[l[d].channel_id,l[d].pay_amount,l[d].pay_times,l[d].pay_num,l[d].pay_rate+"%",l[d].arpu,l[d].arppu];break;default:if(t.legendSelectMode=!0,e[h[0]][h[1]]){var l=e[h[0]][h[1]];t.x_axis=e[h[0]].x_axis;var r=0;$.each(l,function(n,a){i.head.push(n+c);for(var e=0;e<a.length;e++)i.body[e]||(i.body[e]=[t.x_axis[e]]),"%"!=_?i.body[e].push(a[e]):i.body[e].push(a[e]+_);t.y_axis.push({name:n,data:a}),r++}),t.tooltip.num=r}}}i.name=M_Inside._tableName(F_ChannelEarn_Info._init,n,a,M_Init._dateCache.begin,M_Init._dateCache.end),a=0,M_Init._dataCache[n+"_"+a]=i,1==n&&M_Inside_Chart._chartData(o,"bs_chart_"+n+"_"+a,t),M_Inside._tableHtml(1,n+"_"+a)}};