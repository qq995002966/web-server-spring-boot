var F_LostAnalysis_Entrance={_init:function(){if(B_Login._checkUpdate(),M_HeadFoot._headShow(1),"demo"!=M_Init._controller&&B_User._isDemoUser())B_Login._openLogin("background");else{switch(M_Init._clean(),M_Init._controller){case"demo":M_Init._api.innerLostAnalysis="demoInnerLostAnalysis";break;default:M_Init._api.innerLostAnalysis="innerLostAnalysis"}M_Init._dateCache.begin=M_Init._dateChoose.begin,M_Init._dateCache.end=M_Init._dateChoose.end,M_Common._getOrderGame("lostanalysis","","1-5-1"),B_Date._chooseSection({autoCommit:!1,todayValid:!1},1,M_Init._dateChoose.begin,M_Init._dateChoose.end,function(a,_){a==M_Init._dateCache.begin&&M_Init._dateCache.end==_||(M_Init._dateCache.begin=a,M_Init._dateCache.end=_,F_LostAnalysis_Info._getInfo())})}}},F_LostAnalysis_Info={_tab:["活跃玩家","付费玩家"],_init:[{type:"togetherTab",name:"每日流失统计",tab:["7日流失率","14日流失率","30日流失率"],tips:[{},{position:"second",content:["所选时期内，当日登录过游戏但之后连续7日不登录的玩家占当日该类玩家比例","所选时期内，当日登录过游戏但之后连续14日不登录的玩家占当日该类玩家比例 ","所选时期内，当日登录过游戏但之后连续30日不登录的玩家占当日该类玩家比例"]}]},{type:"togetherTab",name:"每日回流统计",tab:["7日回流人数","14日回流人数","30日回流人数"],tips:[{},{position:"second",content:["所选时期内，之前连续超过7日不登录，但在当日回归的玩家数","所选时期内，之前连续超过14日不登录，但在当日回归的玩家数","所选时期内，之前连续超过30日不登录，但在当日回归的玩家数"]}]}],_port:[[[[{name:"7日流失率",key:"axis_lost|y_axis_active_lost_rate_7d"}],[{name:"7日流失率",key:"axis_lost|y_axis_paid_lost_rate_7d"}]],[[{name:"14日流失率",key:"axis_lost|y_axis_active_lost_rate_14d"}],[{name:"14日流失率",key:"axis_lost|y_axis_paid_lost_rate_14d"}]],[[{name:"30日流失率",key:"axis_lost|y_axis_active_lost_rate_30d"}],[{name:"30日流失率",key:"axis_lost|y_axis_paid_lost_rate_30d"}]]],[[[{name:"7日回流人数",key:"axis_back|y_axis_active_back_num_7d"}],[{name:"7日回流人数",key:"axis_back|y_axis_paid_back_num_7d"}]],[[{name:"14日回流人数",key:"axis_back|y_axis_active_back_num_14d"}],[{name:"14日回流人数",key:"axis_back|y_axis_paid_back_num_14d"}]],[[{name:"30日回流人数",key:"axis_back|y_axis_active_back_num_30d"}],[{name:"30日回流人数",key:"axis_back|y_axis_paid_back_num_30d"}]]]],_domInit:function(){$("#headerTop .fl").remove();for(var a=[],_={},t=0;t<F_LostAnalysis_Info._tab.length;t++)0==t&&(_={id:t,name:F_LostAnalysis_Info._tab[t]}),a.push({id:t,name:F_LostAnalysis_Info._tab[t]});var e=M_Inside._dropHtml("bs_drop_user_type","选择分析对象",_,a);$("#headerTop").prepend(e),M_Inside._dropShow("tg-selected-drop"),M_Inside._dropSelected(function(a,_){M_Init._dataCache.tabIndex=a,F_LostAnalysis_Info._formatInfo()},"tg-selected-drop"),M_Inside._dropLeave("tg-selected-drop"),M_Inside._htmlChartTable($("#ct_main_area"),F_LostAnalysis_Info._init),M_Inside._downloadCsv(),F_LostAnalysis_Info._getInfo()},_getInfo:function(){for(var a=M_Init._dateCache.begin,_=M_Init._dateCache.end,t=[],e=0;e<F_LostAnalysis_Info._init.length;e++)t.push("bs_chart_"+e+"_0");var n={};n.start_date=a,n.end_date=_,n.game_id=M_Init._gameId,n=B_Common._postData(n),B_Port._ajax(M_Init._api.innerLostAnalysis,"get",!0,n,function(){for(var a=0;a<t.length;a++)$("#"+t[a]).html(B_Pre._loading())},function(){for(var a=0;a<t.length;a++)$("#"+t[a]).html("")},function(a,_){a&&(M_Init._dataCache.tabIndex=0,M_Init._dataCache.data=a,F_LostAnalysis_Info._formatInfo())},function(a,_,e){for(var n=0;n<t.length;n++)$("#"+t[n]).html(B_Pre._empty(_))})},_formatInfo:function(){for(var a=0;a<F_LostAnalysis_Info._init.length;a++){M_Init._dataCache["position_"+a]||(M_Init._dataCache["position_"+a]=0);for(var _=0;_<F_LostAnalysis_Info._init[a].tab.length;_++)if(M_Init._dataCache["position_"+a]==_){F_LostAnalysis_Info._chartHtml(a,_),M_Inside._chartTableIcon(F_LostAnalysis_Info._init[a].type,a,_);break}M_Inside._tabChangePerChart(a,F_LostAnalysis_Info._init[a].type,"lostAnalysis")}},_chartHtml:function(a,_){M_Init._dataCache.tabIndex||(M_Init._dataCache.tabIndex=0),M_Init._dataCache["position_"+a]=_;var t=M_Init._dataCache.data,e={x_axis:[],y_axis:[],yFormat:""},n={},i=50,s="";switch(a+""){case"0":e.xFormatDate=!0,e.yFormat="%",e.tooltip={num:1,unit:"%"},s="%";break;case"1":e.xFormatDate=!0,e.yFormat="",e.tooltip={num:1,unit:""},s=""}switch(a+""){case"0":switch(_+""){case"0":n={head:["日期","7日流失率"],body:[]};break;case"1":n={head:["日期","14日流失率"],body:[]};break;case"2":n={head:["日期","30日流失率"],body:[]}}break;case"1":switch(_+""){case"0":n={head:["日期","7日回流人数"],body:[]};break;case"1":n={head:["日期","14日回流人数"],body:[]};break;case"2":n={head:["日期","30日回流人数"],body:[]}}}for(var o=0;o<F_LostAnalysis_Info._port[a][_][M_Init._dataCache.tabIndex].length;o++){var d=F_LostAnalysis_Info._port[a][_][M_Init._dataCache.tabIndex][o].key.split("|"),r=F_LostAnalysis_Info._port[a][_][M_Init._dataCache.tabIndex][o].name;switch(i=50,a+""){case"0":if(t[d[0]][d[1]]){var c=t[d[0]][d[1]];e.x_axis=t[d[0]].x_axis;for(var I=0;I<c.length;I++)n.body[I]||(n.body[I]=[t[d[0]].x_axis[I]]),n.body[I].push(c[I]+"%");e.y_axis.push({name:r,data:c})}break;case"1":if(t[d[0]][d[1]]){var c=t[d[0]][d[1]];e.x_axis=t[d[0]].x_axis;for(var I=0;I<c.length;I++)n.body[I]||(n.body[I]=[t[d[0]].x_axis[I]]),n.body[I].push(c[I]);e.y_axis.push({name:r,data:c})}}}n.name=M_Inside._tableName(F_LostAnalysis_Info._init,a,_,M_Init._dateCache.begin,M_Init._dateCache.end),_=0,M_Init._dataCache[a+"_"+_]=n,M_Inside_Chart._chartData(i,"bs_chart_"+a+"_"+_,e),M_Inside._tableHtml(1,a+"_"+_)}};