var F_GamePost_Entrance={_init:function(t){if(B_Login._checkUpdate(),M_HeadFoot._headShow(2),M_Dom._menuList("游戏详情","7-5"),B_User._isDemoUser())B_Login._openLogin("background");else{M_Init._clean();var a="";if(a=t?M_Outside._keywordSplit(t):B_Common._getUrl("query"),a.g?(M_Init._gameDetailId=a.g,B_Game._setLast(M_Init._gameDetailId,"outsideGameDetail")):M_Init._gameDetailId||(M_Init._gameDetailId=M_Init._getGameId("outsideGameDetail")),a.k&&(M_Init._searchKeyword=B_Common._decodeUrl(a.k)),a.b&&a.e){a.b=B_Common._decodeUrl(a.b),a.e=B_Common._decodeUrl(a.e),M_Init._dateCache.dateType="diff",M_Init._dateCache.begin=a.b,M_Init._dateCache.end=a.e;var e=a.b.split(" ");e.length>1?M_Init._dateCache.beginShow=e[0]:M_Init._dateCache.beginShow=M_Init._dateCache.begin;var e=a.e.split(" ");e.length>1?M_Init._dateCache.endShow=e[0]:M_Init._dateCache.endShow=M_Init._dateCache.end}else M_Init._dateCache.dateType=-30,M_Init._dateCache.begin=B_Date._getDiffDate(null,-29),M_Init._dateCache.end=B_Date._getDiffDate(null,0),M_Init._dateCache.beginShow=M_Init._dateCache.begin,M_Init._dateCache.endShow=M_Init._dateCache.end;M_Outside._dateDiffInit(),a.f&&(M_Init._dataCache.info_id_list=a.f),a.c&&(M_Init._dataCache.lighttower_classify=a.c),a.t&&(M_Init._dataCache.topic_id=a.t),a.s&&(M_Init._dataCache.classify_sentiment=a.s),a.r&&(M_Init._dataCache.real_tag=a.r),a.o&&(M_Init._dataCache.sentiment_score=a.o),M_Game._checkGameVisitList("gamePost")}}},F_GamePost_Info={_domInit:function(){$("#ct_main_area").html(F_GamePost_Info._htmlCondition()),$("#bs_sort_reply").click(function(){M_Init._dataCache.order_field&&"publish_time"==M_Init._dataCache.order_field?"desc"==M_Init._dataCache.order_by?M_Init._dataCache.order_by="asc":M_Init._dataCache.order_by="desc":(M_Init._dataCache.order_field="publish_time",M_Init._dataCache.order_by="asc"),F_GamePost_Info._getInfo()}),$("#bs_condition_forum li").each(function(){$(this).click(function(){$(this).hasClass("selected")||($(this).addClass("selected").siblings().removeClass("selected"),M_Init._dataCache.info_id_list=$(this).attr("data-i"),F_GamePost_Info._getInfo())})}),$("#bs_condition_topic li").each(function(){$(this).click(function(){$(this).hasClass("selected")?($(this).removeClass("selected"),M_Init._dataCache.lighttower_classify=""):($(this).addClass("selected").siblings().removeClass("selected"),M_Init._dataCache.lighttower_classify=$(this).attr("data-i")),F_GamePost_Info._getInfo()})}),$("#bs_condition_emotion li").each(function(){$(this).click(function(){$(this).hasClass("selected")?($(this).removeClass("selected"),M_Init._dataCache.classify_sentiment=""):($(this).addClass("selected").siblings().removeClass("selected"),M_Init._dataCache.classify_sentiment=$(this).attr("data-i")),F_GamePost_Info._getInfo()})}),$("#bs_condition_keyword button").click(function(){var t=$.trim($("#bs_condition_keyword input").val());""==M_Init._searchKeyword&&""==t?B_Pop._init("msg",{content:"搜索关键词必须填写，请确认！"}):(M_Init._searchKeyword=t,F_GamePost_Info._getInfo())}),$("#bs_condition_date li").each(function(){$(this).click(function(){if($(this).attr("data-i")&&!$(this).hasClass("selected")){switch($(this).addClass("selected").siblings().removeClass("selected"),M_Init._dataCache.dateType=$(this).attr("data-i"),M_Init._dataCache.dateType+""){case"1":M_Init._dateCache.begin=B_Date._getDiffDate(null,0),M_Init._dateCache.end=B_Date._getDiffDate(null,0);break;case"-1":M_Init._dateCache.begin=B_Date._getDiffDate(null,-1),M_Init._dateCache.end=B_Date._getDiffDate(null,-1);break;case"-7":M_Init._dateCache.begin=B_Date._getDiffDate(null,-6),M_Init._dateCache.end=B_Date._getDiffDate(null,0);break;case"-30":M_Init._dateCache.begin=B_Date._getDiffDate(null,-29),M_Init._dateCache.end=B_Date._getDiffDate(null,0);break;case"-90":M_Init._dateCache.begin=B_Date._getDiffDate(null,-89),M_Init._dateCache.end=B_Date._getDiffDate(null,0)}M_Outside._dateDiffInit(),F_GamePost_Info._getInfo()}})}),B_Date._chooseSection({autoCommit:!1,todayValid:!0},1,M_Init._dateCache.beginShow,M_Init._dateCache.endShow,function(t,a){t==M_Init._dateCache.begin&&M_Init._dateCache.end==a||(M_Init._dateCache.begin=t,M_Init._dateCache.end=a,$("#bs_condition_date li").each(function(){$(this).attr("data-i")&&$(this).removeClass("selected")}),F_GamePost_Info._getInfo())}),F_GamePost_Info._getInfo()},_getSource:function(){var t={};t.project_id=M_Init._gameDetailId,t=B_Common._postData(t),B_Port._ajax("crawlerInfoApps","get",!0,t,null,null,function(t,a){M_Init._dataCache.isGetForumData=!0,t&&t.forum_info_list&&t.forum_info_list.length>0&&(M_Init._dataCache.forumData=t.forum_info_list),M_Init._dataCache.isGetClassifyData&&F_GamePost_Info._domInit()},null)},_getClassify:function(){var t={};t.project_id=M_Init._gameDetailId,t=B_Common._postData(t),B_Port._ajax("forumSearchClassify","get",!0,t,null,null,function(t,a){M_Init._dataCache.isGetClassifyData=!0,t&&t.length>0&&(M_Init._dataCache.classifyData=t),M_Init._dataCache.isGetForumData&&F_GamePost_Info._domInit()},null)},_htmlCondition:function(){var t="";if(t+='<div class="blockpart col-lg-12 col-md-12 col-sm-12 col-xs-12"><h3 class="part-title">论坛搜索</h3>',t+='<div class="boxshadow">',t+='<div class="factor-filter-part">',t+="<div>",t+="<span>论坛</span>",t+='<ul id="bs_condition_forum">',t+='<li class="'+(M_Init._dataCache.info_id_list?"":"selected")+'" data-i="0"> 全部论坛</li>',M_Init._dataCache.forumData)for(var a=0;a<M_Init._dataCache.forumData.length;a++)t+='<li class="'+(M_Init._dataCache.info_id_list&&M_Init._dataCache.info_id_list==M_Init._dataCache.forumData[a].info_id?"selected":"")+'" data-i="'+M_Init._dataCache.forumData[a].info_id+'">'+M_Init._dataCache.forumData[a].fourm_name+"</li>";if(t+="</ul>",t+="</div>",t+='<div class="date">',t+="<span>日期</span>",t+='<ul id="bs_condition_date">',t+='<li><div class="tg-selected-drop tg-date-fl"><p class="tg-drop-text-part"><i class="tg-graph tg-triangle-gray-bottom"></i><span class="hot-area" id="dc1"></span><input id="db1" type="hidden" value=""><input id="de1" type="hidden" value=""></p></div></li>',t+='<li data-i="1" class="'+(1==M_Init._dateCache.dateType?"selected":"")+'">今天</li>',t+='<li data-i="-1" class="'+(-1==M_Init._dateCache.dateType?"selected":"")+'">昨天</li>',t+='<li data-i="-7" class="'+(-7==M_Init._dateCache.dateType?"selected":"")+'">最近一周</li>',t+='<li data-i="-30" class="'+(-30==M_Init._dateCache.dateType?"selected":"")+'">最近一个月</li>',t+='<li data-i="-90" class="'+(-90==M_Init._dateCache.dateType?"selected":"")+'">最近三个月</li>',t+="</ul>",t+="</div>",t+="<div>",t+="<span>主题</span>",t+='<ul id="bs_condition_topic">',M_Init._dataCache.classifyData)for(var a=0;a<M_Init._dataCache.classifyData.length;a++)t+='<li class="'+(M_Init._dataCache.lighttower_classify&&M_Init._dataCache.lighttower_classify==M_Init._dataCache.classifyData[a]?"selected":"")+'" data-i="'+M_Init._dataCache.classifyData[a]+'">'+M_Init._dataCache.classifyData[a]+"</li>";return t+="</ul>",t+="</div>",t+="<div>",t+="<span>情感</span>",t+='<ul id="bs_condition_emotion">',t+='<li class="'+(M_Init._dataCache.classify_sentiment&&1==M_Init._dataCache.classify_sentiment?"selected":"")+'" data-i="1">正面情感帖</li>',t+='<li class="'+(M_Init._dataCache.classify_sentiment&&-1==M_Init._dataCache.classify_sentiment?"selected":"")+'" data-i="-1">负面情感帖</li>',t+="</ul>",t+="</div>",t+='<div class="keyword">',t+="<span>关键词</span>",t+='<ul id="bs_condition_keyword">',t+='<li><input type="text" placeholder="搜索关键词，多个关键词用空格隔开" value="'+(M_Init._searchKeyword||"")+'"></li>',t+='<li><button class="tg-main-btn">搜索</button></li>',t+="</ul>",t+="</div></div>",t+='<div class="article-list">',t+='<div class="top"><i class="tg-icon sort-icon" id="bs_sort_reply"></i><span>按发帖时间排序</span></div>',t+='<ul class="left-list boxshadow">',t+='<div class="scroll-wrap" id="lt_forum_list"><ul></ul></div>',t+='<ul class="tg-page-list" id="lt_forum_page"></ul>',t+="</ul>",t+='<ul class="detail-right">',t+='<div class="scroll-wrap" id="lt_forum_detail"><h5></h5><li class="boxshadow first-floor"></li><li class="boxshadow second-floor"></li></div>',t+="</ul>",t+="</div>",t+="</div>",t+="</div>"},_getInfo:function(){M_ForumList._postData.data={},M_ForumList._postData.type="post",M_Init._gameId=M_Init._gameDetailId,M_Init._dataCache.info_id_list&&0!=M_Init._dataCache.info_id_list&&(M_ForumList._postData.data.info_id_list=M_Init._dataCache.info_id_list),M_Init._dataCache.lighttower_classify&&(M_ForumList._postData.data.lighttower_classify=M_Init._dataCache.lighttower_classify),M_Init._dataCache.topic_id&&(M_ForumList._postData.data.topic_id=M_Init._dataCache.topic_id),M_Init._dataCache.classify_sentiment&&(M_ForumList._postData.data.classify_sentiment=M_Init._dataCache.classify_sentiment),M_Init._dataCache.real_tag&&(M_ForumList._postData.data.real_tag=M_Init._dataCache.real_tag),M_Init._dataCache.sentiment_score&&(M_ForumList._postData.data.sentiment_score=M_Init._dataCache.sentiment_score),M_ForumList._postData.data.begin=M_Init._dateCache.begin,M_ForumList._postData.data.end=M_Init._dateCache.end,M_ForumList._postData.data.order_field=M_Init._dataCache.order_field?M_Init._dataCache.order_field:"publish_time",M_ForumList._postData.data.order_by=M_Init._dataCache.order_by?M_Init._dataCache.order_by:"desc",M_Init._searchKeyword&&(M_ForumList._postData.data.word=M_Init._searchKeyword),M_ForumList._getList(1)}};