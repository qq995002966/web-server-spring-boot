var F_PayHabit_Entrance={_init:function(){if(B_Login._checkUpdate(),M_HeadFoot._headShow(1),"demo"!=M_Init._controller&&B_User._isDemoUser())B_Login._openLogin("background");else{switch(M_Init._clean(),M_Init._controller){case"demo":M_Init._api.innerOperationPayHabit="demoInnerOperationPayHabit";break;default:M_Init._api.innerOperationPayHabit="innerOperationPayHabit"}M_Init._dateCache.begin=M_Init._dateChoose.begin,M_Init._dateCache.end=M_Init._dateChoose.end,M_Common._getOrderGame("payhabit","","1-4-4"),B_Date._chooseSection({autoCommit:!1,todayValid:!1},1,M_Init._dateChoose.begin,M_Init._dateChoose.end,function(a,e){a==M_Init._dateCache.begin&&M_Init._dateCache.end==e||(M_Init._dateCache.begin=a,M_Init._dateCache.end=e,F_PayHabit_Info._getInfo())})}}},F_PayHabit_Info={_init:[{type:"togetherTab",name:"付费频次与额度",tab:["周付费次数","月付费次数","周付费金额","月付费金额"],tips:[{},{position:"second",content:["所选时期内有付费的玩家，在每个自然周内的付费次数分布","所选时期内有付费的玩家，在每个自然月内的付费次数分布 ","所选时期内有付费的玩家，在每个自然周内的付费金额分布","所选时期内有付费的玩家，在每个自然月内的付费金额分布"]}]},{type:"together",name:"首付时间分布",tab:[],tips:[{position:"first",content:["所选时期内，玩家从注册游戏到首次充值的时间间隔的分布"]}]},{type:"switchTab",name:"付费方式分布",tab:["付费金额","付费人次"],tips:[{},{position:"second",content:["所选时期内，玩家付费时采用的支付手段按付费金额分布","所选时期内，玩家付费时采用的支付手段按付费次数分布"]}]},{type:"switchTab",name:"充值包类型分布",tab:["付费金额","付费人次"],tips:[{},{position:"second",content:["所选时期内，玩家付费的充值包按累计金额分布","所选时期内，玩家付费的充值包按累计人次分布"]}]}],_port:[[[{name:"付费人数",key:"axis_pay|y_axis_paytimes_week"}],[{name:"付费人数",key:"axis_pay|y_axis_paytimes_month"}],[{name:"付费人数",key:"axis_pay|y_axis_payamount_week"}],[{name:"付费人数",key:"axis_pay|y_axis_payamount_month"}]],[[{name:"付费人数",key:"axis_time_elapse|y_axis_time_elapse"}]],[[{name:"付费金额",key:"axis_pay_method|y_axis_pay_amount"}],[{name:"付费人次",key:"axis_pay_method|y_axis_pay_times"}]],[[{name:"付费金额",key:"axis_pay_item|y_axis_pay_item_amount"}],[{name:"付费人次",key:"axis_pay_item|y_axis_pay_item_times"}]]],_domInit:function(){M_Inside._htmlChartTable($("#ct_main_area"),F_PayHabit_Info._init),M_Inside._downloadCsv(),F_PayHabit_Info._getInfo()},_getInfo:function(){for(var a=M_Init._dateCache.begin,e=M_Init._dateCache.end,t=[],_=0;_<F_PayHabit_Info._init.length;_++)t.push("bs_chart_"+_+"_0");var i={};i.start_date=a,i.end_date=e,i.game_id=M_Init._gameId,i=B_Common._postData(i),B_Port._ajax(M_Init._api.innerOperationPayHabit,"get",!0,i,function(){for(var a=0;a<t.length;a++)$("#"+t[a]).html(B_Pre._loading())},function(){for(var a=0;a<t.length;a++)$("#"+t[a]).html("")},function(a,e){if(a){M_Init._dataCache.data=a;for(var t=0;t<F_PayHabit_Info._init.length;t++)if(F_PayHabit_Info._init[t].tab.length>0){M_Init._dataCache["position_"+t]||(M_Init._dataCache["position_"+t]=0);for(var _=0;_<F_PayHabit_Info._init[t].tab.length;_++)if(M_Init._dataCache["position_"+t]==_){F_PayHabit_Info._chartHtml(t,_),M_Inside._chartTableIcon(F_PayHabit_Info._init[t].type,t,_);break}M_Inside._tabChangePerChart(t,F_PayHabit_Info._init[t].type,"payhabit")}else F_PayHabit_Info._chartHtml(t,"0"),M_Inside._chartTableIcon(F_PayHabit_Info._init[t].type,t,"0")}},function(a,e,_){for(var i=0;i<t.length;i++)$("#"+t[i]).html(B_Pre._empty(e))})},_chartHtml:function(a,e,t){M_Init._dataCache["position_"+a]=e;var _=M_Init._dataCache.data,i={x_axis:[],y_axis:[],yFormat:""},n={},o=50,s="";switch(a+""){case"0":switch(i.tooltip={num:1,unit:"人"},e+""){case"0":n={head:["周付费次数"],body:[]};break;case"1":n={head:["月付费次数"],body:[]};break;case"2":n={head:["周付费金额"],body:[]};break;case"3":n={head:["月付费金额"],body:[]}}break;case"1":i.tooltip={num:1,unit:"人"},n={head:["首付游戏时间分布"],body:[]};break;case"2":case"3":switch(e+""){case"0":i.yFormat="元",i.tooltip={num:1,unit:"元"},s="元",n={head:["付费方式"],body:[]};break;default:i.tooltip={num:1,unit:"人次"},s="人次",n={head:["付费方式"],body:[]}}}for(var h=0;h<F_PayHabit_Info._port[a][e].length;h++){var d=F_PayHabit_Info._port[a][e][h].key.split("|"),y=F_PayHabit_Info._port[a][e][h].name;switch(a+""){case"0":if(o=20,n.head.push(y),n.head.push("百分比"),_[d[0]][d[1]]){var r=_[d[0]][d[1]];switch(e+""){case"0":i.x_axis=_[d[0]].x_axis_paytimes_week;break;case"1":i.x_axis=_[d[0]].x_axis_paytimes_month;break;case"2":i.x_axis=_[d[0]].x_axis_payamount_week;break;case"3":i.x_axis=_[d[0]].x_axis_payamount_month}for(var p=[],c=0;c<r.length;c++){var b=i.x_axis[c];switch(b=b.replace("&gt;",">"),b=b.replace("&lt;","<"),e+""){case"2":case"3":b+="元"}p.push(b),n.body[c]||(n.body[c]=[b]),n.body[c].push(r[c]),n.body[c].push(_[d[0]][d[1]+"_percentage"][c]+"%")}i.x_axis=p,i.y_axis.push({name:y,data:r})}break;case"1":if(o=20,n.head.push(y),n.head.push("百分比"),_[d[0]][d[1]]){var r=_[d[0]][d[1]];i.x_axis=_[d[0]].x_axis_time_elapse;for(var c=0;c<r.length;c++)i.x_axis[c]=i.x_axis[c].replace("&gt;",">"),i.x_axis[c]=i.x_axis[c].replace("&lt;","<"),n.body[c]||(n.body[c]=[i.x_axis[c]]),n.body[c].push(r[c]),n.body[c].push(_[d[0]][d[1]+"_percentage"][c]+"%");i.y_axis.push({name:y,data:r})}break;case"2":if(o=20,n.head.push(y+"("+s+")"),n.head.push("百分比"),_[d[0]][d[1]]){var r=_[d[0]][d[1]];i.x_axis=_[d[0]].x_axis_pay_method;for(var c=0;c<r.length;c++)n.body[c]||(n.body[c]=[i.x_axis[c]]),n.body[c].push(r[c]),n.body[c].push(_[d[0]][d[1]+"_percentage"][c]+"%");i.y_axis.push({name:y,data:r})}break;case"3":if(o=20,n.head.push(y+"("+s+")"),n.head.push("百分比"),_[d[0]][d[1]]){var r=_[d[0]][d[1]];i.x_axis=_[d[0]].x_axis_pay_item;for(var c=0;c<r.length;c++)n.body[c]||(n.body[c]=[i.x_axis[c]]),n.body[c].push(r[c]),n.body[c].push(_[d[0]][d[1]+"_percentage"][c]+"%");i.y_axis.push({name:y,data:r})}}}n.name=M_Inside._tableName(F_PayHabit_Info._init,a,e,M_Init._dateCache.begin,M_Init._dateCache.end),e=0,M_Init._dataCache[a+"_"+e]=n,M_Inside_Chart._chartData(o,"bs_chart_"+a+"_"+e,i),M_Inside._tableHtml(1,a+"_"+e)}};