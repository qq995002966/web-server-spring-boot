var F_Summary_Entrance={_init:function(){if(B_Login._checkUpdate(),M_HeadFoot._headShow(1),"demo"!=M_Init._controller&&B_User._isDemoUser())B_Login._openLogin("background");else{switch(M_Init._clean(),M_Init._controller){case"demo":$("#gameDropChoose").show(),B_Pop._init("close"),M_Init._api.innerOperationBase="demoInnerOperationBase";break;default:M_Init._api.innerOperationBase="innerOperationBase"}var a=B_Common._getUrl("query");a.g&&(M_Init._gameId=a.g),M_Common._getOrderGame("summary",a.g,"1-1-1"),M_Init._dateCache.begin=M_Init._dateChoose.begin,M_Init._dateCache.end=M_Init._dateChoose.end,B_Date._chooseSection({autoCommit:!1,todayValid:!1},1,M_Init._dateChoose.begin,M_Init._dateChoose.end,function(a,_){a==M_Init._dateCache.begin&&M_Init._dateCache.end==_||(M_Init._dateCache.begin=a,M_Init._dateCache.end=_,F_Summary_Info._getInfo())}),$("#tab_user_chart ul li").each(function(a){$(this).click(function(){if(!$(this).hasClass("tg-tab-block-active"))switch($(this).addClass("tg-tab-block-active").siblings().removeClass("tg-tab-block-active"),a+""){case"0":F_Summary_Info._chartData("activity");break;case"1":F_Summary_Info._chartData("pay");break;case"2":F_Summary_Info._chartData("lost")}})})}}},F_Summary_Info={_getInfo:function(){M_Init._menuColumnAbnormal["玩家总览"]&&(M_Init._menuColumnAbnormal["玩家总览"]["活跃玩家"]&&$("#tab_user_chart .tg-tab-change-block li").eq(0).append('<i class="alert-point"></i>'),M_Init._menuColumnAbnormal["玩家总览"]["付费玩家"]&&$("#tab_user_chart .tg-tab-change-block li").eq(1).append('<i class="alert-point"></i>'),M_Init._menuColumnAbnormal["玩家总览"]["流失玩家"]&&$("#tab_user_chart .tg-tab-change-block li").eq(2).append('<i class="alert-point"></i>')),$(".dataoverview").html(""),$("#bs_avg").html(""),$("#bs_chart_summary").html("");var a=$(".dataoverview"),_=$("#bs_chart_summary");M_Init._dateCache.begin=M_Init._dateCache.begin?M_Init._dateCache.begin:M_Init._dateChoose.begin,M_Init._dateCache.end=M_Init._dateCache.end?M_Init._dateCache.end:M_Init._dateChoose.end;var n={};n.game_id=M_Init._gameId,n.start_date=M_Init._dateCache.begin,n.end_date=M_Init._dateCache.end,n=B_Common._postData(n),B_Port._ajax(M_Init._api.innerOperationBase,"get",!0,n,function(){a.html(B_Pre._loading("b_padding30")),_.html(B_Pre._loading("b_padding30"))},function(){a.html(""),_.html("")},function(_,n){a.html(F_Summary_Info._htmlIn(_.base)),_.data.x_axis&&(M_Init._dataCache.chart=_.data,F_Summary_Info._chartData("activity"))},function(n,t,e){a.html(B_Pre._empty(t)),_.html(B_Pre._empty(t))})},_chartData:function(a){if(M_Init._dataCache.chart.x_axis){var _={x_axis:M_Init._dataCache.chart.x_axis,y_axis:[]},n=5;switch(a){case"activity":M_Init._dataCache.chart.active_user_new&&_.y_axis.push({name:"新玩家",data:M_Init._dataCache.chart.active_user_new}),M_Init._dataCache.chart.active_user_old&&_.y_axis.push({name:"老玩家",data:M_Init._dataCache.chart.active_user_old}),$("#bs_avg").html("<span>AVG：</span><span>平均每日活跃玩家数<b>"+M_Init._dataCache.chart.avg_login_num+"</b></span>");break;case"pay":n=50,M_Init._dataCache.chart.pay_user_first&&_.y_axis.push({name:"首次付费",data:M_Init._dataCache.chart.pay_user_first}),M_Init._dataCache.chart.pay_user_second&&_.y_axis.push({name:"再次付费",data:M_Init._dataCache.chart.pay_user_second}),M_Init._dataCache.chart.pay_user_potential&&_.y_axis.push({name:"潜在付费",data:M_Init._dataCache.chart.pay_user_potential}),$("#bs_avg").html("<span>AVG：</span><span>平均每日付费玩家数<b>"+M_Init._dataCache.chart.avg_pay_num+"</b></span>");break;case"lost":n=50,M_Init._dataCache.chart.lost_user&&_.y_axis.push({name:"实际流失",data:M_Init._dataCache.chart.lost_user}),M_Init._dataCache.chart.lost_user_potential&&_.y_axis.push({name:"潜在流失",data:M_Init._dataCache.chart.lost_user_potential}),$("#bs_avg").html("<span>AVG：</span><span>平均每日实际流失玩家数<b>"+M_Init._dataCache.chart.avg_login_num+"</b></span>，<span>平均每日有<b>"+M_Init._dataCache.chart.avg_potential_lost_num+"</b>个玩家有流失倾向</span>")}_.y_axis.length>0&&(_.xFormatDate=!0,_.yFormat="",_.tooltip={num:_.y_axis.length,unit:"人"},M_Inside_Chart._chartData(n,"bs_chart_summary",_))}},_htmlIn:function(a){var _="",n="",t="",e="";if(a.newlogin_num){var i=["",""],s="",r=["","",""];a.newlogin_num.value&&(i=a.newlogin_num.value.split("|"),s="+"==i[0]?'<b class="up">&uarr;</b>':'<b class="down">&darr;</b>',a.newlogin_num.avg_newlogin_num_1d&&(r[0]=a.newlogin_num.avg_newlogin_num_1d),a.newlogin_num.avg_newlogin_num_7d&&(r[1]=a.newlogin_num.avg_newlogin_num_7d),a.newlogin_num.avg_newlogin_num_30d&&(r[2]=a.newlogin_num.avg_newlogin_num_30d));var o=["",""],l="",d=["","",""];a.retention_rate.value&&(o=a.retention_rate.value.split("|"),l="+"==o[0]?'<b class="up">&uarr;</b>':'<b class="down">&darr;</b>',a.retention_rate.avg_retention_rate_1d&&(d[0]=a.retention_rate.avg_retention_rate_1d),a.retention_rate.avg_retention_rate_7d&&(d[1]=a.retention_rate.avg_retention_rate_7d),a.retention_rate.avg_retention_rate_30d&&(d[2]=a.retention_rate.avg_retention_rate_30d)),n+='                <li>                    <div class="fl">                        <b class="data-blue">'+i[1]+"</b>                        <span>今日新增玩家人数"+s+'                            <div class="boxshadow hover-show">                                <p>昨日<b>'+r[0]+"</b></p>                                <p>7日<b>"+r[1]+"</b></p>                                <p>30日<b>"+r[2]+'</b></p>                            </div>                        </span>                    </div>                   <div>                        <h4 class="tip-hover">新增玩家情况                            <div class="tip-box-show">                                <i class="triangle-up"></i>                                <div class="tip-box-content">                                    今日新增玩家人数：今日新增加的玩家人数<br>                                    次日留存率：昨日新增玩家中，今日再次登录游戏的玩家所占比例                                </div>                            </div>                        </h4>                        <span>次日留存率<b>'+o[1]+"</b>"+l+'                            <div class="boxshadow hover-show">                                <p>昨日<b>'+d[0]+"%</b></p>                                <p>7日<b>"+d[1]+"%</b></p>                                <p>30日<b>"+d[2]+'%</b></p>                            </div>                        </span>                        <a href="'+B_Jump._getUrl("insideAdditional")+'" class="fr">查看详情</a>                   </div>                </li>'}if(a.login_num){var i=["",""],s="",r=["","",""];a.login_num.value&&(i=a.login_num.value.split("|"),s="+"==i[0]?'<b class="up">&uarr;</b>':'<b class="down">&darr;</b>',a.login_num.avg_login_num_1d&&(r[0]=a.login_num.avg_login_num_1d),a.login_num.avg_login_num_7d&&(r[1]=a.login_num.avg_login_num_7d),a.login_num.avg_login_num_30d&&(r[2]=a.login_num.avg_login_num_30d));var p=["",""],u="",b=["","",""];a.avg_online_minutes.value&&(p=a.avg_online_minutes.value.split("|"),u="+"==p[0]?'<b class="up">&uarr;</b>':'<b class="down">&darr;</b>',a.avg_online_minutes.avg_online_minutes_1d&&(b[0]=a.avg_online_minutes.avg_online_minutes_1d),a.avg_online_minutes.avg_online_minutes_7d&&(b[1]=a.avg_online_minutes.avg_online_minutes_7d),a.avg_online_minutes.avg_online_minutes_30d&&(b[2]=a.avg_online_minutes.avg_online_minutes_30d));var c=["",""],m="",h=["","",""];a.avg_login_times.value&&(c=a.avg_login_times.value.split("|"),m="+"==p[0]?'<b class="up">&uarr;</b>':'<b class="down">&darr;</b>',a.avg_login_times.avg_login_times_1d&&(h[0]=a.avg_login_times.avg_login_times_1d),a.avg_login_times.avg_login_times_7d&&(h[1]=a.avg_login_times.avg_login_times_7d),a.avg_login_times.avg_login_times_30d&&(h[2]=a.avg_login_times.avg_login_times_30d));var v=["",""],g="";a.potential_lost_num&&(v=a.potential_lost_num.split("|"),g="+"==v[0]?'<b class="up">&uarr;</b>':'<b class="down">&darr;</b>'),t+='                <li>                    <div class="fl">                        <b class="data-green">'+i[1]+"</b>                        <span>今日活跃玩家人数"+s+'                            <div class="boxshadow hover-show">                                <p>昨日<b>'+r[0]+"</b></p>                                <p>7日<b>"+r[1]+"</b></p>                                <p>30日<b>"+r[2]+'</b></p>                            </div>                        </span>                    </div>                    <div>                        <h4 class="tip-hover">活跃玩家情况                            <div class="tip-box-show">                                <i class="triangle-up"></i>                                <div class="tip-box-content">                                    今日活跃玩家人数：今日开启过游戏的玩家人数<br>                                    人均游戏时长：今日活跃玩家的人均游戏时长<br>                                    平均游戏次数：今日活跃玩家的人均游戏次数<br>                                    潜在流失玩家：之前7日（含当日）有登录记录，且之后7日（不含当日）不再登录的概率大于50%的玩家                                </div>                            </div>                        </h4>                        <span>人均游戏时长<b>'+p[1]+"</b>"+u+'                        <div class="boxshadow hover-show">                            <p>昨日<b>'+b[0]+"</b></p>                            <p>7日<b>"+b[1]+"</b></p>                            <p>30日<b>"+b[2]+"</b></p>                        </div></span>                        <span>平均游戏次数<b>"+c[1]+"次</b>"+m+'                        <div class="boxshadow hover-show">                            <p>昨日<b>'+h[0]+"次</b></p>                            <p>7日<b>"+h[1]+"次</b></p>                            <p>30日<b>"+h[2]+'次</b></p>                        </div></span>                        <span class="cursor-default">现在的活跃玩家中，有<b>'+v[1]+"</b>个玩家有流失倾向"+g+'</span>                        <a href="'+B_Jump._getUrl("insideActivity")+'" class="fr">查看详情</a>                    </div>                </li>'}if(a.pay_num){var i=["",""],s="",r=["","",""];a.pay_num.value&&(i=a.pay_num.value.split("|"),s="+"==i[0]?'<b class="up">&uarr;</b>':'<b class="down">&darr;</b>',a.pay_num.pay_num_1d&&(r[0]=a.pay_num.pay_num_1d),a.pay_num.pay_num_7d&&(r[1]=a.pay_num.pay_num_7d),a.pay_num.pay_num_30d&&(r[2]=a.pay_num.pay_num_30d));var y=["",""],I="",M=["","",""];a.pay_rate.value&&(y=a.pay_rate.value.split("|"),I="+"==y[0]?'<b class="up">&uarr;</b>':'<b class="down">&darr;</b>',a.pay_rate.pay_rate_1d&&(M[0]=a.pay_rate.pay_rate_1d),a.pay_rate.pay_rate_7d&&(M[1]=a.pay_rate.pay_rate_7d),a.pay_rate.pay_rate_30d&&(M[2]=a.pay_rate.pay_rate_30d));var C=["",""],w="",f=["","",""];a.arpu.value&&(C=a.arpu.value.split("|"),w="+"==C[0]?'<b class="up">&uarr;</b>':'<b class="down">&darr;</b>',a.arpu.arpu_1d&&(f[0]=a.arpu.arpu_1d),a.arpu.arpu_7d&&(f[1]=a.arpu.arpu_7d),a.arpu.arpu_30d&&(f[2]=a.arpu.arpu_30d));var x=["",""],B="";a.potential_pay_num&&(x=a.potential_pay_num.split("|"),B="+"==x[0]?'<b class="up">&uarr;</b>':'<b class="down">&darr;</b>'),e+='                <li>                    <div class="fl">                        <b class="data-red">'+i[1]+"</b>                        <span>今日付费玩家人数"+s+'                            <div class="boxshadow hover-show">                                <p>昨日<b>'+r[0]+"</b></p>                                <p>7日<b>"+r[1]+"</b></p>                                <p>30日<b>"+r[2]+'</b></p>                            </div>                        </span>                    </div>                    <div>                        <h4 class="tip-hover">付费玩家情况                            <div class="tip-box-show">                                <i class="triangle-up"></i>                                <div class="tip-box-content">                                   今日付费玩家人数：今日有付费记录的玩家总人数<br>                                   今日付费率：今日付费玩家占总活跃人数的比例<br>                                  平均用户收入（ARPU）：当日每活跃玩家的平均收益<br>                                   潜在付费玩家：之后7日（不含当日）玩家付费的意愿强度>0.5的玩家数。付费意愿的取值范围为0~1，非常强烈的意愿为1                                </div>                            </div>                        </h4>                        <span>今日付费率<b>'+y[1]+"</b>"+I+'                        <div class="boxshadow hover-show">                            <p>昨日<b>'+M[0]+"</b></p>                            <p>7日<b>"+M[1]+"</b></p>                            <p>30日<b>"+M[2]+"</b></p>                        </div>                        </span>                        <span>平均用户收入<b>"+C[1]+"</b>"+w+'                            <div class="boxshadow hover-show">                                <p>昨日<b>'+f[0]+"</b></p>                                <p>7日<b>"+f[1]+"</b></p>                                <p>30日<b>"+f[2]+'</b></p>                            </div>                        </span>                        <span class="cursor-default">在未付费玩家中，有<b>'+x[1]+"</b>个玩家有付费倾向"+B+'</span>                        <a href="'+B_Jump._getUrl("insidePay")+'" class="fr">查看详情</a>                    </div>                </li>'}return _+='<ul class="data-list">'+n+t+e+"</ul>"}};