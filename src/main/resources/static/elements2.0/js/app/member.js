var F_Member_Entrance={_init:function(){B_Login._checkUpdate(),M_HeadFoot._headShow(1e4),B_User._isDemoUser()?B_Login._openLogin("background"):(M_Init._clean(),F_Member_Info._html())}},F_Member_Info={_html:function(){var n=B_Login._user.user,t=n.mobile&&n.mobile.length>=11?n.mobile.substr(0,3)+"*****"+n.mobile.substr(8,11):"",e="";e+="<li><b>账户昵称：</b>",e+='<span id="bs_nick_name">'+n.nick_name+'</span><span class="edit text-blue" id="bs_nick_edit">修改</span>',e+='<input type="text" value="'+n.nick_name+'" maxlength="20" id="bs_nick_val" class="b_none"><span class="edit text-blue" id="bs_nick_confirm" style="display: none">确认</span>',e+="</li>",e+="<li><b>登录账号：</b>",e+="<span>",e+=t?t:"未绑定",e+="</span>",e+="</li>",e+="<li><b>账户状态：</b>",e+=""!=t?' <span class="text-green">密码保护中</span>':'<span class="text-red">存在安全风险，请设置登录密码</span>',e+="</li>",$("#bs_user_info").html(e),F_Member_Info._clickNick();var s="";s+="<li><b>登录密码：</b><span>\t安全性高的密码可以使账号更安全。</span>",s+='<div class="fr">',s+=""!=t?'<i class="had-approve text-green">√</i><span>已设置</span><button class="tg-assist-btn" id="bs_pass_edit">修改密码</button>':'<i class="had-fail text-red">!</i><span class="text-red">未设置</span><button class="tg-assist-btn" id="bs_pass_set">设置密码</button>',s+="</div></li>",s+="<li><b>手机绑定：</b>",t?(s+="<span>您已绑定了"+t+",您的手机可以直接用于登录，找回密码。</span>",s+='<div class="fr">',s+='<i class="had-approve text-green">√</i><span>已绑定</span>'):(s+="<span>您未绑定了手机,您的手机可以直接用于登录，找回密码。</span>",s+='<div class="fr">',s+='<i class="had-fail text-red">!</i><span class="text-red">未绑定</span><button class="tg-assist-btn" id="bs_mobile_set">绑定手机</button>'),s+="</div></li>",s+="<li><b>绑定QQ：</b>",n.qq_name?(s+="<span>您已绑定了QQ号"+n.qq_name+"，您可以使用QQ号快捷登录</span>",s+='<div class="fr">',s+='<i class="had-approve text-green">√</i><span>已绑定</span>'):(s+="<span>您未绑定QQ号，您可以使用QQ号快捷登录</span>",s+='<div class="fr">',s+='<i class="had-fail text-red">!</i><span class="text-red">未绑定</span><button class="tg-assist-btn" id="bs_qq_set">绑定QQ</button>'),s+="</div></li>",s+="<li><b>绑定微信：</b>",n.wx_name?(s+="<span>您已绑定了微信号"+n.wx_name+"，您可以使用微信快捷登录</span>",s+='<div class="fr">',s+='<i class="had-approve text-green">√</i><span>已绑定</span>'):(s+="<span>您未绑定微信号，您可以使用微信快捷登录</span>",s+='<div class="fr">',s+='<i class="had-fail text-red">!</i><span class="text-red">未绑定</span><button class="tg-assist-btn" id="bs_wechat_set">绑定微信</button>'),s+="</div></li>",$("#bs_user_status").html(s),F_Member_Info._clickSet(),F_Member_Info._htmlStatus(n);var a=B_Common._baseHost()+B_Jump._getUrl("refresh");a=B_Common._encodeUrl(a+"?bind=1"),$("#bs_qq_set").click(function(){B_Login._setStatus("out"),B_Jump._go("base",B_Port._init("qqLogin")+"?redirect_url="+a)}),$("#bs_wechat_set").click(function(){B_Login._setStatus("out"),B_Jump._go("base",B_Port._init("wxLogin")+"?redirect_url="+a)})},_check:function(){var n=$.trim($('input[name="companyName"]').val());if(""==n)return B_Pop._init("msg",{content:"请填写公司名称"}),!1;var t=$.trim($('input[name="realName"]').val());if(""==t)return B_Pop._init("msg",{content:"请填写真实姓名"}),!1;var e=$("#bs_company_type p span").attr("data-i");if(""==e)return B_Pop._init("msg",{content:"请选择公司类型"}),!1;var s=$("#bs_job_type p span").attr("data-i");if(""==s)return B_Pop._init("msg",{content:"请选择公司职位"}),!1;var a=$.trim($('input[name="email"]').val());if(""==a)return B_Pop._init("msg",{content:"请填写电子邮箱"}),!1;if(!B_Common._isMail(a))return B_Pop._init("msg",{content:"电子邮箱格式错误"}),!1;var i=$.trim($('input[name="content"]').val()),_=B_Login._user.user;if(n==_.company_name&&e==_.company_type&&t==_.real_name&&s==_.job_type&&i==_.project_names)return void $("#bs_user_check").html(F_Member_Info._htmlStatus(_));var l=$("#bs_check_confirm"),o={};return o.email=a,o.company_type=e,o.company_name=n,o.real_name=t,o.job_type=s,o.project_names=i,o=B_Common._postData(o),B_Port._ajax("identity","post",!0,o,function(){l.html("保存中,请稍等...").attr("disabled",!0)},function(){l.html("确认修改").attr("disabled",!1)},function(n,t){B_Login._setStatus("out"),B_Pop._init("alert",{content:"身份认证提交成功!"}),setTimeout(function(){return B_Jump._go("reload")},2e3)},function(n,t,e){B_Pop._init("msg",{content:t})}),!1},_htmlStatus:function(n){var t="",e="";return t+='<div class="top-wrap no-infor">',t+='<img src="elements2.0/img/lr/default-pic.jpg" alt="">',t+='<ul class="des">',n.status>1?void F_Member_Info._htmlCheck(n,"hasChecked"):(1==n.status?t+="<li><p>我们正在处理您的身份认证，请耐心等待</p><p>如有任何疑问，请联系我们。<b>service@thinkingdata.cn</b></p></li>":n.status<0?(t+="<li><p>认证失败</p><p>如有任何疑问，请联系我们。<b>service@thinkingdata.cn</b></p></li>",e="重新认证"):(e="完善信息",t+="<li><p>为了向您提供更完整的服务</p><p>请进一步完善您的基本信息</p></li>"),e&&(t+='<button class="tg-main-btn" id="bs_check_btn">'+e+"</button>"),$("#bs_user_check").html(t),void $("#bs_check_btn").click(function(){$("#bs_user_check").html(F_Member_Info._htmlCheck(n))}))},_htmlCheck:function(n,t){var e=!(!t||"hasChecked"!=t),s="";s+='<div class="top-wrap"><img src="elements2.0/img/lr/default-pic.jpg" alt="">',s+='<ul class="des">',s+="<li><b>企业认证状态：</b>",s+=n.status>1?'<i class="had-approve text-green">√</i><span>已认证</span>':'<i class="had-approving text-gray">√</i><span>待认证</span>',s+="</li>",e||(s+='<li><button class="tg-main-btn" id="bs_check_confirm">确认修改</button><button class="tg-assist-btn" id="bs_check_quit">取消修改</button></li>'),s+="</ul>",s+="</div>",s+='<div class="infor-content">',s+='<ul class="des" id="bs_user_detail">',e?(s+=n.company_name?"<li><b>公司名称：</b><span>"+n.company_name+"</span></li>":"<li><b>公司名称：</b><span>-</span></li>",s+=B_User._information.companyArr[n.company_type]?"<li><b>公司类型：</b><span>"+B_User._information.companyArr[n.company_type]+"</span></li>":"<li><b>公司类型：</b><span>-</span></li>",s+=n.real_name?"<li><b>联系人：</b><span>"+n.real_name+"</span></li>":"<li><b>联系人：</b><span>-</span></li>",s+=n.email?"<li><b>电子邮箱：</b><span>"+n.email+"</span></li>":"<li><b>电子邮箱：</b><span>-</span></li>",s+=B_User._information.jobArr[n.job_type]?"<li><b>公司职位：</b><span>"+B_User._information.jobArr[n.job_type]+"</span></li>":"<li><b>公司职位：</b><span>-</span></li>",s+=n.project_names?"<li><b>公司产品：</b><span>"+n.project_names+"</span></li>":"<li><b>公司产品：</b><span>-</span></li>",$("#bs_user_check").html(s),$("#bs_check_reset").click(function(){$("#bs_user_check").html(F_Member_Info._htmlCheck(n))})):(s+='<li><b>公司名称：</b><span><input type="text" placeholder="您当前就职的公司" value="'+n.company_name+'" name="companyName" maxlength="100"></span></li>',s+="<li><b>公司类型：</b>",s+='<div id="selectWrap"><div id="bs_company_type" class="dropDown tg-selected-drop">',s+=B_User._information.companyArr[n.company_type]?'<p><span data-i="'+n.company_type+'">'+B_User._information.companyArr[n.company_type]+'</span><i class="drop-icon"></i></p>':'<p><span data-i="">请选择公司类型</span><i class="drop-icon"></i></p>',s+='<ul class="b_none"></ul></div></div></li>',s+='<li><b>联系人：</b><span><input type="text" placeholder="请输入您的真实姓名" value="'+n.real_name+'" name="realName" maxlength="50"></span></li>',s+='<li><b>电子邮箱：</b><span><input type="text" placeholder="请填写您的邮箱" value="'+n.email+'" name="email" maxlength="100"></span></li>',s+="<li><b>公司职位：</b>",s+='<div id="selectWrap"><div id="bs_job_type" class="dropDown tg-selected-drop">',s+=B_User._information.jobArr[n.job_type]?'<p><span data-i="'+n.job_type+'">'+B_User._information.jobArr[n.job_type]+'</span><i class="drop-icon"></i></p>':'<p><span data-i="">请选择工作职位</span><i class="drop-icon"></i></p>',s+='<ul class="b_none"></ul></div></div></li>',s+='<li><b>公司产品：</b><span><input type="text" placeholder="请输入贵公司开发或运营的游戏" value="'+n.project_names+'" name="content" maxlength="300"></span></li>',$("#bs_user_check").html(s),F_Member_Info._htmlDropInit(),$("#bs_check_confirm").click(function(){F_Member_Info._check()}),$("#bs_check_quit").click(function(){$("#bs_user_check").html(F_Member_Info._htmlStatus(n))}))},_clickSet:function(){$("#bs_mobile_set").click(function(){B_Jump._go("target","bind")}),$("#bs_pass_set").click(function(){B_Jump._go("target","bind")}),$("#bs_pass_edit").click(function(){B_Jump._go("target","find")})},_clickNick:function(){$("#bs_nick_edit").click(function(){$("#bs_nick_val").show(),$("#bs_nick_confirm").show(),$("#bs_nick_name").hide(),$("#bs_nick_edit").hide()}),$("#bs_nick_confirm").click(function(){var n=$.trim($("#bs_nick_val").val());if(""==n)return B_Pop._init("msg",{content:'请填写昵称，格式为1-20位字符，支持汉字、字母、数字及"-"、"_"组合'}),!1;var t=$("#bs_nick_name").html();n!=t&&($("#bs_nick_name").html(n),$("#topNav .user-list p").html(n),F_Member_Info._alterNick(n)),$("#bs_nick_val").hide(),$("#bs_nick_confirm").hide(),$("#bs_nick_name").show(),$("#bs_nick_edit").show()})},_alterNick:function(n){var t={};t.nick_name=n,t=B_Common._postData(t),B_Port._ajax("userInfo","post",!0,t,null,null,function(n,t){B_Login._setStatus("out")},function(n,t,e){})},_htmlDropInit:function(){$("#bs_company_type ul").html(F_Member_Info._htmlSelect(B_User._information.companyArr)),$("#bs_job_type ul").html(F_Member_Info._htmlSelect(B_User._information.jobArr)),M_Inside._dropShow(),M_Inside._dropLeave(),M_Inside._dropSelected()},_htmlSelect:function(n){for(var t="",e=0;e<n.length;e++)t+='<li><a data-i="'+e+'">'+n[e]+"</a></li>";return t}};