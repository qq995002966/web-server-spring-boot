var F_GameComment_Entrance={_init:function(t){if(B_Login._checkUpdate(),M_HeadFoot._headShow(2),M_Dom._menuList("游戏详情","7-6"),B_User._isDemoUser())B_Login._openLogin("background");else{M_Init._clean();var e="";if(e=t?M_Outside._keywordSplit(t):B_Common._getUrl("query"),e.g?(M_Init._gameDetailId=e.g,B_Game._setLast(M_Init._gameDetailId,"outsideGameDetail")):M_Init._gameDetailId||(M_Init._gameDetailId=M_Init._getGameId("outsideGameDetail")),e.k&&(M_Init._searchKeyword=B_Common._decodeUrl(e.k)),e.b&&e.e){e.b=B_Common._decodeUrl(e.b),e.e=B_Common._decodeUrl(e.e),M_Init._dateCache.dateType="diff",M_Init._dateCache.begin=e.b,M_Init._dateCache.end=e.e;var a=e.b.split(" ");a.length>1?M_Init._dateCache.beginShow=a[0]:M_Init._dateCache.beginShow=M_Init._dateCache.begin;var a=e.e.split(" ");a.length>1?M_Init._dateCache.endShow=a[0]:M_Init._dateCache.endShow=M_Init._dateCache.end}else M_Init._dateCache.dateType=-30,M_Init._dateCache.begin=B_Date._getDiffDate(null,-29),M_Init._dateCache.end=B_Date._getDiffDate(null,0),M_Init._dateCache.beginShow=M_Init._dateCache.begin,M_Init._dateCache.endShow=M_Init._dateCache.end;M_Outside._dateDiffInit(),e.f&&(M_Init._dataCache.source_type_list=e.f),e.n&&(M_Init._dataCache.es_field_name=B_Common._decodeUrl(e.n)),e.v&&(M_Init._dataCache.es_field_val=B_Common._decodeUrl(e.v)),e.s&&(M_Init._dataCache.rating_stage_list=e.s),e.w&&e.wt&&(M_Init._dataCache.sentiment_keywords=B_Common._decodeUrl(e.w)+"/"+e.wt),M_Game._checkGameVisitList("gameComment")}}},F_GameComment_Info={_domInit:function(){$("#ct_main_area").html(F_GameComment_Info._htmlCondition()),M_Outside._searchPop(),$("#bs_condition_forum li").each(function(){$(this).click(function(){$(this).hasClass("selected")||($(this).addClass("selected").siblings().removeClass("selected"),M_Init._dataCache.source_type_list=$(this).attr("data-i"),F_GameComment_Info._getInfo())})}),$("#bs_condition_emotion li").each(function(){$(this).click(function(){$(this).hasClass("selected")?($(this).removeClass("selected"),M_Init._dataCache.rating_stage_list=""):($(this).addClass("selected").siblings().removeClass("selected"),M_Init._dataCache.rating_stage_list=$(this).attr("data-i")),F_GameComment_Info._getInfo()})}),$("#bs_condition_keyword button").click(function(){var t=$.trim($("#bs_condition_keyword input").val());""==M_Init._searchKeyword&&""==t?B_Pop._init("msg",{content:"搜索关键词必须填写，请确认！"}):(M_Init._searchKeyword=t,F_GameComment_Info._getInfo())}),$("#bs_condition_date li").each(function(){$(this).click(function(){if($(this).attr("data-i")&&!$(this).hasClass("selected")){switch($(this).addClass("selected").siblings().removeClass("selected"),M_Init._dataCache.dateType=$(this).attr("data-i"),M_Init._dataCache.dateType+""){case"1":M_Init._dateCache.begin=B_Date._getDiffDate(null,0),M_Init._dateCache.end=B_Date._getDiffDate(null,0);break;case"-1":M_Init._dateCache.begin=B_Date._getDiffDate(null,-1),M_Init._dateCache.end=B_Date._getDiffDate(null,-1);break;case"-7":M_Init._dateCache.begin=B_Date._getDiffDate(null,-6),M_Init._dateCache.end=B_Date._getDiffDate(null,0);break;case"-30":M_Init._dateCache.begin=B_Date._getDiffDate(null,-29),M_Init._dateCache.end=B_Date._getDiffDate(null,0);break;case"-90":M_Init._dateCache.begin=B_Date._getDiffDate(null,-89),M_Init._dateCache.end=B_Date._getDiffDate(null,0)}M_Outside._dateDiffInit(),F_GameComment_Info._getInfo()}})}),B_Date._chooseSection({autoCommit:!1,todayValid:!0},1,M_Init._dateCache.beginShow,M_Init._dateCache.endShow,function(t,e){t==M_Init._dateCache.begin&&M_Init._dateCache.end==e||(M_Init._dateCache.begin=t,M_Init._dateCache.end=e,$("#bs_condition_date li").each(function(){$(this).attr("data-i")&&$(this).removeClass("selected")}),F_GameComment_Info._getInfo())}),F_GameComment_Info._getInfo()},_getSource:function(){var t={};t.project_id=M_Init._gameDetailId,t=B_Common._postData(t),B_Port._ajax("crawlerInfoApps","get",!0,t,null,null,function(t,e){t&&t.apps_list&&t.apps_list.length>0?(M_Init._dataCache.appData=t.apps_list,F_GameComment_Info._domInit()):$("#ct_main_area").html(B_Pre._empty("暂无数据"))},null)},_htmlCondition:function(){var t="";if(t+='<div class="blockpart col-lg-12 col-md-12 col-sm-12 col-xs-12"><h3 class="part-title">全网评论</h3>',t+='<div class="boxshadow">',t+='<div class="factor-filter-part">',t+="<div>",t+="<span>渠道</span>",t+='<ul id="bs_condition_forum">',t+='<li class="'+(M_Init._dataCache.source_type_list?"":"selected")+'" data-i="0"> 全部渠道</li>',M_Init._dataCache.appData)for(var e=0;e<M_Init._dataCache.appData.length;e++){var a=B_Game._source(M_Init._dataCache.appData[e].source_type);a&&(t+='<li class="'+(M_Init._dataCache.source_type_list&&M_Init._dataCache.source_type_list==M_Init._dataCache.appData[e].source_type?"selected":"")+'" data-i="'+M_Init._dataCache.appData[e].source_type+'">'+a.source_desc+"</li>")}return t+="</ul>",t+="</div>",t+='<div class="date">',t+="<span>日期</span>",t+='<ul id="bs_condition_date">',t+='<li><div class="tg-selected-drop tg-date-fl"><p class="tg-drop-text-part"><i class="tg-graph tg-triangle-gray-bottom"></i><span class="hot-area" id="dc1"></span><input id="db1" type="hidden" value=""><input id="de1" type="hidden" value=""></p></div></li>',t+='<li data-i="1" class="'+(1==M_Init._dateCache.dateType?"selected":"")+'">今天</li>',t+='<li data-i="-1" class="'+(-1==M_Init._dateCache.dateType?"selected":"")+'">昨天</li>',t+='<li data-i="-7" class="'+(-7==M_Init._dateCache.dateType?"selected":"")+'">最近一周</li>',t+='<li data-i="-30" class="'+(-30==M_Init._dateCache.dateType?"selected":"")+'">最近一个月</li>',t+='<li data-i="-90" class="'+(-90==M_Init._dateCache.dateType?"selected":"")+'">最近三个月</li>',t+="</ul>",t+="</div>",t+="<div>",t+="<span>情感</span>",t+='<ul id="bs_condition_emotion">',t+='<li class="'+(M_Init._dataCache.rating_stage_list&&1==M_Init._dataCache.rating_stage_list?"selected":"")+'" data-i="1">正面评论</li>',t+='<li class="'+(M_Init._dataCache.rating_stage_list&&-1==M_Init._dataCache.rating_stage_list?"selected":"")+'" data-i="-1">负面评论</li>',t+="</ul>",t+="</div>",t+='<div class="keyword">',t+="<span>关键词</span>",t+='<ul id="bs_condition_keyword">',t+='<li><input type="text" placeholder="搜索关键词，多个关键词用空格隔开" value="'+(M_Init._searchKeyword||"")+'"></li>',t+='<li><button class="tg-main-btn">搜索</button></li>',t+="</ul>",t+="</div></div>",t+='<div class="article-list" id="allComment">',t+='<ul class="detail-right">',t+='<div class="scroll-wrap" id="lt_forum_list"></div>',t+='<ul class="tg-page-list" id="lt_forum_page"></ul>',t+="</ul>",t+="</div>",t+="</div>",t+="</div>"},_getInfo:function(){if(M_AppCommentList._postData.data={},M_AppCommentList._postData.type="comment",M_Init._gameId=M_Init._gameDetailId,M_Init._dataCache.source_type_list&&0!=M_Init._dataCache.source_type_list&&(M_AppCommentList._postData.data.source_type_list=M_Init._dataCache.source_type_list),M_Init._dataCache.rating_stage_list){switch(M_Init._dataCache.rating_stage_list+""){case"1":M_Init._dataCache.rating_stage_list="好评";break;case"-1":M_Init._dataCache.rating_stage_list="差评"}M_AppCommentList._postData.data.rating_stage_list=M_Init._dataCache.rating_stage_list}M_Init._dataCache.es_field_name&&(M_AppCommentList._postData.data.es_field_name=M_Init._dataCache.es_field_name),M_Init._dataCache.es_field_val&&(M_AppCommentList._postData.data.es_field_val=M_Init._dataCache.es_field_val),M_Init._dataCache.sentiment_keywords&&(M_AppCommentList._postData.data.sentiment_keywords=M_Init._dataCache.sentiment_keywords),M_AppCommentList._postData.data.begin=M_Init._dateCache.begin,M_AppCommentList._postData.data.end=M_Init._dateCache.end,M_AppCommentList._postData.data.order_field=M_Init._dataCache.order_field?M_Init._dataCache.order_field:"publish_time",M_AppCommentList._postData.data.order_by=M_Init._dataCache.order_by?M_Init._dataCache.order_by:"desc",M_Init._searchKeyword&&(M_AppCommentList._postData.data.word=M_Init._searchKeyword),M_AppCommentList._getList(1)}};