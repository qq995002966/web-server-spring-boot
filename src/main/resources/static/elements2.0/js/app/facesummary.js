var F_FaceSummary_Entrance={_init:function(e){if(B_Login._checkUpdate(),M_HeadFoot._headShow(2),M_Dom._menuList("游戏详情","7-9-1"),B_User._isDemoUser())B_Login._openLogin("background");else{M_Init._clean();var a=B_Common._getUrl("query");a.g?(M_Init._gameDetailId=a.g,B_Game._setLast(M_Init._gameDetailId,"outsideGameDetail")):e?(M_Init._gameDetailId=e,B_Game._setLast(M_Init._gameDetailId,"outsideGameDetail")):M_Init._gameDetailId||(M_Init._gameDetailId=M_Init._getGameId("outsideGameDetail")),M_Game._checkGameVisitList("gameFaceSummary")}}},F_FaceSummary_Info={_domArea:function(){var e="";return e+='            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">                <div class="b_chart" id="bs_map_distribute" style="height: 450px"></div>                </div>                <div id="areaPart">                <div class="py_mplist" id="bs_line_distribute"></div>            </div>'},_domDynamic:function(){var e="";return e+='            <div class="graph-show fl" id="bs_pie_dynamic"></div>            <ul class="instruct-plant" id="lt_list_dynamic"></ul>'},_domCallupon:function(){var e="";return e+='            <div class="graph-show fl" id="bs_pie_callupon"></div>            <ul class="instruct-plant" id="lt_list_callupon"></ul>'},_domComplain:function(){var e="";return e+='            <i class="complaint-s"></i>            <div class="b_chart_wrap">                <div class="b_chart" id="bs_line_complain"></div>            </div>            <i class="complaint-h"></i>'},_getInfo:function(){var e=$("#lt_gender_compare"),a=$("#bs_face_area"),t=$("#bs_face_dynamic"),i=$("#bs_face_callupon"),_=$("#bs_face_complain"),n=$("#lt_item_list"),r={};r.project_id=M_Init._gameDetailId,r=B_Common._postData(r),B_Port._ajax("faceProfileGlobal","get",!0,r,function(){e.html(B_Pre._loading()),a.html(B_Pre._loading()),t.html(B_Pre._loading()),i.html(B_Pre._loading()),n.html(B_Pre._loading()),_.html(B_Pre._loading())},function(){e.html(""),a.html(""),t.html(""),i.html(""),n.html(""),_.html("")},function(r,l){r.total_num?(e.html(F_Face_Html._htmlGender(r.sex_distri)),$("#num_high_charm").html(r.high_charm_num),$("#num_high_pay").html(r.high_pay_num),$("#num_trash").html(r.trash_num),$("#num_lost").html(r.lost_num),a.html(F_FaceSummary_Info._domArea()),t.html(F_FaceSummary_Info._domDynamic()),i.html(F_FaceSummary_Info._domCallupon()),_.html(F_FaceSummary_Info._domComplain()),F_Face_Html._chartMap("bs_map_distribute","bs_line_distribute",r.province_distri),F_Face_Html._htmlLine(n,r.interest_distri),F_FaceSummary_Info._chartScatter("bs_line_complain",r.complain_rate_distri),F_FaceSummary_Info._chartPie("influence","bs_pie_callupon",r.influence_distri,$("#lt_list_callupon"),r.influence_be_replied_distri),F_FaceSummary_Info._chartPie("active","bs_pie_dynamic",r.active_distri,$("#lt_list_dynamic"),r.active_post_distri)):(e.html(B_Pre._empty("暂无数据")),a.html(B_Pre._empty("暂无数据")),t.html(B_Pre._empty("暂无数据")),i.html(B_Pre._empty("暂无数据")),n.html(B_Pre._empty("暂无数据")),_.html(B_Pre._empty("暂无数据")),B_Pop._init("msg",{content:"当前游戏数据源较少"}))},function(r,l,m){e.html(B_Pre._empty(l)),a.html(B_Pre._empty(l)),t.html(B_Pre._empty(l)),i.html(B_Pre._empty(l)),n.html(B_Pre._empty(l)),_.html(B_Pre._empty(l))})},_htmlPie:function(e,a,t,i){var _={},n=F_Face_Common._init[e],r="";if(t&&t.length>0)for(var l=0;l<t.length;l++)$.each(t[l],function(e,a){_[e]=a});var m=0;switch(e){case"active":for(var l=0;l<n.length;l++)switch(m=_[n[l]]?_[n[l]].toFixed(2):0,l){case 0:r+=F_FaceSummary_Info._htmlPieFormat("月平均发言量","color-d",{name:"高活跃玩家",desc:"他们直接影响游戏人气"},{number:m,percent:i[2]});break;case 1:r+=F_FaceSummary_Info._htmlPieFormat("月平均发言量","color-e",{name:"中活跃玩家",desc:"他们是游戏的中流砥柱"},{number:m,percent:i[1]});break;case 2:r+=F_FaceSummary_Info._htmlPieFormat("月平均发言量","color-f",{name:"低活跃玩家",desc:"他们是游戏的关注者"},{number:m,percent:i[0]})}break;case"influence":for(var l=0;l<n.length;l++)switch(m=_[n[l]]?_[n[l]].toFixed(2):0,l){case 0:r+=F_FaceSummary_Info._htmlPieFormat("贴均回复数","color-a",{name:"高号召玩家",desc:"他们对舆论导向作用明显"},{number:m,percent:i[2]});break;case 1:r+=F_FaceSummary_Info._htmlPieFormat("贴均回复数","color-b",{name:"中号召玩家",desc:"他们是舆论的传播者"},{number:m,percent:i[1]});break;case 2:r+=F_FaceSummary_Info._htmlPieFormat("贴均回复数","color-c",{name:"低号召玩家",desc:"他们是舆论的响应者"},{number:m,percent:i[0]})}}r+='            <div class="triangle-border">            <i class="triangle-content"></i>            <i class="triangle-border-wrap"></i>            </div>',a.html(r)},_htmlPieFormat:function(e,a,t,i){var _="";return _+="<li>",_+="<div><p>"+t.name+"</p><span>"+t.desc+"</span></div>",_+='<div><b class="'+a+'">'+i.number+"</b><span>"+e+"</span></div>",_+='<div><b class="'+a+'">'+i.percent+"</b><span>人数比例</span></div>",_+="</li>"},_chartPie:function(e,a,t,i,_){if(t&&t.length>0){var n="",r=[],l=["0%","0%","0%"];switch(e){case"influence":r=[{value:0,name:"低号召"},{value:0,name:"中号召"},{value:0,name:"高号召"}],n=["#1A806E","#429F53","#3ECB82"];break;case"active":r=[{value:0,name:"低活跃"},{value:0,name:"中活跃"},{value:0,name:"高活跃"}],n=["#EDCF5A","#E19334","#E26148"]}for(var m=0,c=0;c<t.length;c++)$.each(t[c],function(e,a){e.indexOf("高")>-1&&(r[2].value=a),e.indexOf("中")>-1&&(r[1].value=a),e.indexOf("低")>-1&&(r[0].value=a),m+=a});if(m>0)for(var o=0,c=0;c<r.length;c++)o=(r[c].value/m*100).toFixed(1)+"%",l[c]=o,r[c].name+="\r\n("+o+")";var s={};s.tooltip={trigger:"item",formatter:"{b} {c}"},s.legend=null,s.color=n,s.series=[{hoverAnimation:!1,type:"pie",radius:"45%",center:["50%","50%"],data:r,labelLine:{normal:{length:15,length2:1}}}],B_Chart._getEChart("pie",a,s),F_FaceSummary_Info._htmlPie(e,i,_,l)}},_chartScatter:function(e,a){var t=[],i={name:"",data:""},_=0;if($.each(a,function(e,a){a.complain_rate=(100*parseFloat(a.complain_rate)).toFixed(0);var n=[a.rank,a.complain_rate];if(t.push(n),parseInt(a.complain_rate)>parseInt(_)&&(_=a.complain_rate),parseInt(M_Init._gameDetailId)==parseInt(e)){a.rank_rate=(100*parseFloat(a.rank_rate)).toFixed(0),0==a.rank_rate&&(a.rank_rate=1),$("#num_active_percent").html(a.rank_rate+"%");var r=B_Game._getGame([M_Init._gameDetailId],1);r[M_Init._gameDetailId]&&(i.name=r[M_Init._gameDetailId][1]+"\r\n活跃度前"+a.rank_rate+"%\r\n抱怨"+a.complain_rate+"%"),i.data=n}}),0!=_){_=(2*_).toFixed(0);var n=_%10;0!=n&&(_-=n),_>100&&_<120&&(_=120)}var r={};r.grid={top:"3%",left:"1%",right:"5%",bottom:"1%",containLabel:!0},r.tooltip={trigger:"item",formatter:function(e){return"抱怨程度："+e.value[1]+"%"}},r.legend=null,r.xAxis=[{type:"value",scale:!0,axisLine:{show:!1},axisLabel:{show:!1},splitLine:{show:!1}}],r.yAxis=[{max:_,type:"value",scale:!0,axisLine:{show:!1},axisLabel:{formatter:"{value}% "}}],r.series=[{type:"scatter",symbolSize:5,data:t,lineStyle:{color:"#B2D5E8"},markPoint:{data:[{coord:i.data,symbol:"pin",symbolSize:120,label:{normal:{show:!0,formatter:i.name}}}]}}],B_Chart._getEChart("scatter",e,r)}};