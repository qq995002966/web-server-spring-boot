var F_Personality_Entrance={_init:function(a){if(B_Login._checkUpdate(),M_HeadFoot._headShow(1),"demo"!=M_Init._controller&&B_User._isDemoUser())B_Login._openLogin("background");else{switch(M_Init._clean(),M_Init._controller){case"demo":M_Init._api.innerOperationPage="demoInnerOperationPage";break;default:M_Init._api.innerOperationPage="innerOperationPage"}if(a){var t=a.toString().split("-");M_Init._gameIdRight=t[t.length-1]}else M_Common._menuUrlInit();M_Common._getOrderGame("personality","","10-"+a),M_Init._dateCache.begin=M_Init._dateChoose.begin,M_Init._dateCache.end=M_Init._dateChoose.end,B_Date._chooseSection({autoCommit:!1,todayValid:!1},1,M_Init._dateChoose.begin,M_Init._dateChoose.end,function(a,t){a==M_Init._dateCache.begin&&M_Init._dateCache.end==t||(M_Init._dateCache.begin=a,M_Init._dateCache.end=t,M_Init._isUseKeywordReset=!0,F_Personality_Info._domInit())})}}},F_Personality_Info={_domInit:function(){F_Personality_Info._getInfo()},_getInfo:function(){M_Init._dataCache.init=[],M_Init._dataCache.port=[],M_Init._dataCache.select=[];var a={};a.menu_id=M_Init._gameIdRight,a.start_date=M_Init._dateCache.begin?M_Init._dateCache.begin:M_Init._dateChoose.begin,a.end_date=M_Init._dateCache.end?M_Init._dateCache.end:M_Init._dateChoose.end,a.game_id=M_Init._gameId,a=B_Common._postData(a),B_Port._ajax(M_Init._api.innerOperationPage,"get",!0,a,function(){B_Pop._init("load",{type:1,time:60,shade:[.6,"#000000"]})},function(){B_Pop._init("close")},function(a,t){if(a&&a.length>0){for(var e=0;e<a.length;e++){for(var n={name:a[e].name,type:"",tab:[],tips:[]},i=[],_=a[e].data.length,d=0;d<a[e].data.length;d++){var o=[];switch(a[e].data[d].chart_type+""){case"6":n.type="tableColSpan20",0==n.tips.length&&n.tips.push({position:"first",content:a[e].data[d].chart_explain}),o.push({chart:a[e].data[d].chart_type,x:a[e].data[d].data.item,y:a[e].data[d].data.data});break;default:n.type=_>1?"togetherTab20":"together20",n.tab.push(a[e].data[d].name),0==n.tips.length&&(n.tips.push({}),n.tips.push({position:"second",content:[]})),n.tips[1].content.push(a[e].data[d].chart_explain);var s="";switch(a[e].data[d].chart_type+""){case"8":M_Init._dataCache.select[e]||(M_Init._dataCache.select[e]=[]),M_Init._dataCache.select[e][d]||(M_Init._dataCache.select[e][d]=[]),$.each(a[e].data[d].data,function(t,n){s=n.x_name?n.x_name:"-",M_Init._dataCache.select[e][d].push({name:t}),$.each(n,function(i,_){"x_axis"!=i&&"x_name"!=i&&o.push({chart:a[e].data[d].chart_type,unit:"",name:i,y:_.y_axis,x:n.x_axis,xName:s,yName:_.y_name?_.y_name:i,parent:t})})});break;default:if(s=a[e].data[d].data.x_name?a[e].data[d].data.x_name:"-",a[e].data[d].data&&a[e].data[d].data.item)for(var h=0;h<a[e].data[d].data.item.length;h++)a[e].data[d].data[a[e].data[d].data.item[h]].y_name?o.push({chart:a[e].data[d].chart_type,unit:a[e].data[d].data[a[e].data[d].data.item[h]].y_unit,name:a[e].data[d].data.item[h],y:a[e].data[d].data[a[e].data[d].data.item[h]].y_axis,xName:s,yName:a[e].data[d].data[a[e].data[d].data.item[h]].y_name,x:a[e].data[d].data.x_axis}):o.push({chart:a[e].data[d].chart_type,unit:a[e].data[d].data[a[e].data[d].data.item[h]].y_unit,name:a[e].data[d].data.item[h],y:a[e].data[d].data[a[e].data[d].data.item[h]].y_axis,xName:s,yName:"",x:a[e].data[d].data.x_axis})}}i.push(o)}M_Init._dataCache.init.push(n),M_Init._dataCache.port.push(i)}F_Personality_Info._formatData()}},function(a,t,e){B_Pop._init("msg",{content:t})})},_formatData:function(){""==$("#ct_main_area").html()&&(M_Inside._htmlChartTable($("#ct_main_area"),M_Init._dataCache.init),M_Inside._downloadCsv());for(var a=M_Init._dataCache.init,t=0;t<a.length;t++)if(a[t].tab.length>0){M_Init._dataCache["position_"+t]||(M_Init._dataCache["position_"+t]=0);for(var e=0;e<a[t].tab.length;e++)if(M_Init._dataCache["position_"+t]==e){F_Personality_Info._chartHtml(t,e),M_Inside._chartTableIcon(a[t].type,t,e);break}M_Inside._tabChangePerChart(t,a[t].type,"personality")}else F_Personality_Info._chartHtml(t,"0"),M_Inside._chartTableIcon(a[t].type,t,"0")},_chartHtml:function(a,t,e){if(M_Init._dataCache.select&&M_Init._dataCache.select[a]&&((M_Init._dataCache["position_"+a]!=t||M_Init._isUseKeywordReset)&&($("#bs_tab_select_"+a).remove(),M_Init._isUseKeywordReset=!1),M_Init._dataCache.select[a][t]&&$("#bs_tab_select_"+a).length<=0)){for(var n=M_Init._dataCache.select[a][t],i='<div class="chart-wrap-drop" id="bs_tab_select_'+a+'">',_="",d=0;d<n.length;d++){var o=n[d].name.split(":");0==d&&(o.length>1&&(_=o[1]),i+="<span>"+_+'</span><div class="tg-selected-drop">',i+='<p class="tg-drop-text-part"><i class="tg-graph tg-triangle-gray-bottom"></i><span id="tabSelect" data-i="'+n[d].name+'" data-d="'+a+"-"+t+'">'+o[0]+"</span></p>",e=n[d].name,i+='<ul style="display: none;">'),i+='<li><a data-i="'+n[d].name+'">'+o[0]+"</a></li>"}i+="</ul></div></div>",$("#lt_main_area_"+a+"_0").prepend(i),M_Inside._dropShow(),M_Inside._dropSelected(function(a,t){t=t.split("-"),F_Personality_Info._chartHtml(t[0],t[1],a)}),M_Inside._dropLeave()}M_Init._dataCache["position_"+a]=t;var s=M_Init._dataCache.port[a][t];if(e){for(var h=[],d=0;d<s.length;d++)s[d].parent&&s[d].parent==e&&h.push(s[d]);s=h}var r={x_axis:[],y_axis:[],xFormatDate:!1,yFormat:"",legendSelectMode:!1},c={head:[],body:[]},l=0;r.tooltip={num:0,unit:[]};for(var d=0;d<s.length;d++)switch(s[d].chart+""){case"2":case"3":case"4":case"8":switch(s[d].chart+""){case"2":l=20;break;case"3":l=50;break;case"4":case"8":l=40}r.tooltip.num+=1,r.tooltip.unit.push(s[d].unit),r.yFormat=s[d].unit,r.x_axis=s[d].x;var m=s[d].y.length;m>1&&(r.legendSelectMode=!0),0==c.head.length&&c.head.push(s[d].xName),c.head.push(s[d].yName);for(var p=0;p<m;p++)c.body[p]||(c.body[p]=[s[d].x[p]]),"%"!=s[d].unit?c.body[p].push(s[d].y[p]):c.body[p].push(s[d].y[p]+"%");r.y_axis.push({name:s[d].name,data:s[d].y});break;case"6":for(var I=s[d].x.length,M=s[d].y.length,u=!1,g="",y=[],f=[],C=[],b="",x="",v="",P="",w=[],F=0;F<I;F++){switch(y=s[d].x[F].toString().split(","),y.length+""){case"1":g="",b=y[0],x="";break;case"2":g=y[0],b=y[1],x="";break;case"3":u=!0,g=y[0],b=y[2],x=y[1]}f[b]||(C.push({name:b}),f[b]={field:"",unit:"",child:[]}),""!=x?f[b].child.push({field:s[d].x[F],unit:g,name:x}):(f[b].field=s[d].x[F],f[b].unit=g)}v+="<tr>",P+=u?"<tr>":"";for(var k=0;k<C.length;k++){var S=f[C[k].name].child.length;if(S>0){v+='<td colspan="'+S+'">'+C[k].name+"</td>";for(var F=0;F<S;F++)P+="<td>"+f[C[k].name].child[F].name+"</td>",w.push({name:C[k].name+"-"+f[C[k].name].child[F].name,field:f[C[k].name].child[F].field,unit:f[C[k].name].child[F].unit})}else v+=u?'<td rowspan="2">':"<th>",v+=C[k].name,v+=u?"</td>":"</th>",w.push({name:C[k].name,field:f[C[k].name].field,unit:f[C[k].name].unit})}P+="</tr>",P+=u?"</tr>":"",c.formatHead=v+P;for(var p=0;p<M;p++){c.body[p]=[];for(var k=0;k<w.length;k++)0==p&&c.head.push(w[k].name),"%"!=w[k].unit?c.body[p].push(s[d].y[p][w[k].field]):c.body[p].push(s[d].y[p][w[k].field]+"%")}}c.name=M_Inside._tableName(M_Init._dataCache.init,a,t,M_Init._dateCache.begin,M_Init._dateCache.end),t=0;var N=20;l>0?(M_Inside_Chart._chartData(l,"bs_chart_"+a+"_"+t,r),N=10):c.name=M_Inside._tableName(M_Init._dataCache.init,a,t,M_Init._dateCache.begin,M_Init._dateCache.end),M_Init._dataCache[a+"_"+t]=c,M_Inside._tableHtml(1,a+"_"+t,N),M_Dom._trSelected()}};