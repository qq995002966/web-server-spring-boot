var F_PayData_Entrance={_init:function(){if(B_Login._checkUpdate(),M_HeadFoot._headShow(1),"demo"!=M_Init._controller&&B_User._isDemoUser())B_Login._openLogin("background");else{switch(M_Init._clean(),M_Init._controller){case"demo":M_Init._api.innerPayData="demoInnerPayData";break;default:M_Init._api.innerPayData="innerPayData"}M_Init._dateCache.begin=M_Init._dateChoose.begin,M_Init._dateCache.end=M_Init._dateChoose.end,M_Common._getOrderGame("paydata","","1-4-1"),B_Date._chooseSection({autoCommit:!1,todayValid:!1},1,M_Init._dateChoose.begin,M_Init._dateChoose.end,function(a,t){a==M_Init._dateCache.begin&&M_Init._dateCache.end==t||(M_Init._dateCache.begin=a,M_Init._dateCache.end=t,F_PayData_Info._getInfo())})}}},F_PayData_Info={_init:[{type:"togetherTabAvg",name:"付费数据",tab:["付费金额","付费次数","付费人数","潜在付费人数"],tips:[{},{position:"second",content:["当日玩家成功付费的总金额","当日玩家成功付费的总次数 ","当日玩家成功付费的总人数","之后7日（不含当日）玩家付费的意愿强度>0.5的玩家数。付费意愿的取值范围为0~1，非常强烈的意愿为1"]}]},{type:"togetherTab",name:"付费金额与玩家等级分布",tab:["付费金额","付费人次"],tips:[{},{position:"second",content:["所选时期内，当前等级的成功付费总金额分布","所选时期内，当前等级的成功付费总次数分布 "]}]},{type:"switchTab",name:"付费金额与地区分布",tab:["中国地区","全球地区"],tips:[{},{position:"second",content:["所选时期内，当前地区的成功付费总金额分布","所选时期内，当前地区的成功付费总金额分布"]}]},{type:"switch",name:"付费金额与渠道分布",tab:[],tips:[{position:"first",content:"所选时期内，当前渠道的成功付费总金额分布"}]}],_avg:[[[{label:"AVG：",name:"日均付费金额",key:"pay_data|avg_pay_amount",unit:"元"},{label:"SUM：",name:"付费金额总数",key:"pay_data|sum_pay_amount",unit:"元"}],[{label:"AVG：",name:"日均付费次数",key:"pay_data|avg_pay_times",unit:"次"},{label:"SUM：",name:"付费总次数",key:"pay_data|sum_pay_times",unit:"次"}],[{label:"AVG：",name:"日均付费人数",key:"pay_data|avg_pay_num",unit:"人"},{label:"SUM：",name:"付费总人数",key:"pay_data|sum_pay_num",unit:"人"}],[{label:"AVG：",name:"日均有付费倾向的玩家数",key:"pay_data|avg_potential_pay_num",unit:"人"},{label:"SUM：",name:"有付费倾向的玩家总数",key:"pay_data|sum_potential_pay_num",unit:"人"}]]],_port:[[[{name:"付费金额",key:"pay_data|y_axis_pay_amount"}],[{name:"付费次数",key:"pay_data|y_axis_pay_times"}],[{name:"付费人数",key:"pay_data|y_axis_pay_num"}],[{name:"潜在付费人数",key:"pay_data|y_axis_potential_pay_num"}]],[[{name:"付费金额",key:"pay_level|y_level_axis_pay_amount"}],[{name:"付费人次",key:"pay_level|y_level_axis_pay_times"}]],[[{name:"中国地区",key:"axis_area|china"}],[{name:"全球地区",key:"axis_area|global"}]],[[{name:"付费金额与渠道分布",key:"axis_channel|y_channel_axis_pay_amount"}]]],_domInit:function(){M_Inside._htmlChartTable($("#ct_main_area"),F_PayData_Info._init),M_Inside._downloadCsv(),F_PayData_Info._getInfo()},_getInfo:function(){for(var a=M_Init._dateCache.begin,t=M_Init._dateCache.end,e=[],_=0;_<F_PayData_Info._init.length;_++)e.push("bs_chart_"+_+"_0");var n={};n.start_date=a,n.end_date=t,n.game_id=M_Init._gameId,n=B_Common._postData(n),B_Port._ajax(M_Init._api.innerPayData,"get",!0,n,function(){for(var a=0;a<e.length;a++)$("#"+e[a]).html(B_Pre._loading())},function(){for(var a=0;a<e.length;a++)$("#"+e[a]).html("")},function(a,t){if(a){M_Init._dataCache.data=a;for(var e=0;e<F_PayData_Info._init.length;e++)if(F_PayData_Info._init[e].tab.length>0){M_Init._dataCache["position_"+e]||(M_Init._dataCache["position_"+e]=0);for(var _=0;_<F_PayData_Info._init[e].tab.length;_++)if(M_Init._dataCache["position_"+e]==_){F_PayData_Info._chartHtml(e,_),M_Inside._chartTableIcon(F_PayData_Info._init[e].type,e,_);break}M_Inside._tabChangePerChart(e,F_PayData_Info._init[e].type,"paydata")}else F_PayData_Info._chartHtml(e,0),M_Inside._chartTableIcon(F_PayData_Info._init[e].type,e,0)}},function(a,t,_){for(var n=0;n<e.length;n++)$("#"+e[n]).html(B_Pre._empty(t))})},_chartHtml:function(a,t){M_Init._dataCache["position_"+a]=t;var e=M_Init._dataCache.data,_={x_axis:[],y_axis:[],yFormat:""},n={},i=50,o="";switch(a+""){case"0":switch(_.xFormatDate=!0,_.yFormat="",_.tooltip={num:1,unit:""},o="",t+""){case"0":_.tooltip={num:1,unit:"元"},_.yFormat="元",o="元";break;case"1":_.yFormat="次",_.tooltip={num:1,unit:"次"},o="次"}break;case"1":switch(t+""){case"0":_.yFormat="元",_.tooltip={num:1,unit:"元"},o="元";break;case"1":_.yFormat="人次",_.tooltip={num:1,unit:"人次"},o="人次"}break;case"2":case"3":_.tooltip={num:1,unit:"元"}}switch(a+""){case"0":n={head:["日期"],body:[]};break;case"1":n={head:["等级"],body:[]};break;case"2":n={head:["地区","付费金额(元)","百分比"],body:[]};break;case"3":n={head:["渠道","付费金额(元)","百分比"],body:[]}}for(var s=0;s<F_PayData_Info._port[a][t].length;s++){var y=F_PayData_Info._port[a][t][s].key.split("|"),d=F_PayData_Info._port[a][t][s].name;switch(a+""){case"0":if(i=50,o?n.head.push(d+"("+o+")"):n.head.push(d+""),e[y[0]]&&e[y[0]][y[1]]){var p=e[y[0]][y[1]];_.x_axis=e[y[0]].x_axis;for(var h=0;h<p.length;h++)n.body[h]||(n.body[h]=[e[y[0]].x_axis[h]]),n.body[h].push(p[h]);_.y_axis.push({name:d,data:p})}break;case"1":if(i=40,o?n.head.push(d+"("+o+")"):n.head.push(d+""),n.head.push("百分比"),e[y[0]]&&e[y[0]][y[1]]){var p=e[y[0]][y[1]];switch(t+""){case"0":for(var h=0;h<p.length;h++)_.x_axis.push(e[y[0]].x_level_axis[h]+"级"),n.body[h]||(n.body[h]=[e[y[0]].x_level_axis[h]+"级"]),n.body[h].push(p[h]),n.body[h].push(e[y[0]].y_level_axis_pay_amount_percentage[h]+"%");break;case"1":for(var h=0;h<p.length;h++)_.x_axis.push(e[y[0]].x_level_axis[h]+"级"),n.body[h]||(n.body[h]=[e[y[0]].x_level_axis[h]+"级"]),n.body[h].push(p[h]),n.body[h].push(e[y[0]].y_level_axis_pay_times_percentage[h]+"%")}_.y_axis.push({name:d,data:p})}break;case"2":if(i=20,e[y[0]][y[1]]){for(var p=e[y[0]][y[1]],r=[],h=0;h<p.length;h++)_.x_axis.push(p[h].area_classify),r.push(p[h].pay_amount),n.body[h]||(n.body[h]=[p[h].area_classify]),n.body[h].push(p[h].pay_amount),n.body[h].push(p[h].user_rate+"%");_.y_axis.push({name:d,data:r})}break;case"3":if(i=20,e[y[0]]&&e[y[0]][y[1]]){var p=e[y[0]][y[1]];_.x_axis=e[y[0]].x_channel_axis;for(var h=0;h<p.length;h++)n.body[h]||(n.body[h]=[_.x_axis[h]]),n.body[h].push(p[h]),n.body[h].push(e[y[0]].y_channel_axis_pay_amount_percentage[h]+"%");_.y_axis.push({name:d,data:p})}}}if(F_PayData_Info._avg[a]&&F_PayData_Info._avg[a][t]){for(var l="",c=F_PayData_Info._avg[a][t],m=0;m<c.length;m++)c[m].label&&(l+="<span>"+c[m].label+"</span>"),l+="<span>"+c[m].name+"<b>",y=c[m].key.split("|"),e[y[0]]&&e[y[0]][y[1]]&&(l+=e[y[0]][y[1]]),l+=c[m].unit+"</b></span>";M_Inside._avgHtml(a+"_0",l)}n.name=M_Inside._tableName(F_PayData_Info._init,a,t,M_Init._dateCache.begin,M_Init._dateCache.end),t=0,M_Init._dataCache[a+"_"+t]=n,M_Inside_Chart._chartData(i,"bs_chart_"+a+"_"+t,_),M_Inside._tableHtml(1,a+"_"+t)}};